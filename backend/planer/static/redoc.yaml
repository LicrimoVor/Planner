openapi: 3.0.0

info:
  description: |
    # Введение
    Данная документация API приведена для проекта [Planer o_0](ссылочка**). Проект назначен на
    создание плана для пространств и личного плана работников без высокого уровня
    вхождения (с минимальным интерфейсом и без перегружения функционала). 

    # OpenAPI-спецификация
    В данной спецификации API описаны все эндпоинты и необходимые json-параметры,
    которые используются для создания или редактирования: задач, тегов, пользователей

    # Аунтентификация
    - На основе сессий:
      Основная форма аунтетификации сервиса - session-based. При авторизации 
    данным способом sessionid сохраняется в cookie браузера и сопоставляется с 
    id пользователем. Дополнительно отправлять ничего не надо.
    - На основе токена:
      Планнер поддерживает еще одну форму аунтетификации - TokenAuthentication.
    Все запросы от имени пользователя должны выполняться с заголовком: <br>
    "Authorization: Token TOKENVALUE"'
    <SecurityDefinitions />

  version: 1.2.0
  title: Planer o_0
  # termsOfService: ''
  contact:
    name: Разработчик
    email: mr.licrimovor@yandex.ru
    url: https://github.com/LicrimoVor

tags:
  - name: Пользователи
    description: |
      Поиск по username/last_name/first_name: http://127.0.0.1:8000/users/search/lic/ <br>
  - name: Теги
  - name: Статусы
  - name: Пространства
  - name: Задачи пространства
    description: |
      Фильтрация по тегам: http://127.0.0.1:8000/api/space/{id}/task/?tags=1&tags=2 <br>
      Фильтрация по статусу: http://127.0.0.1:8000/api/space/{id}/task/?status=1 <br>
      Фильтрация по акутальным задачам: http://127.0.0.1:8000/api/space/{id}/task/?actual=true <br>
      Фильтрация по main задачам (!!!выключает выборку подзадач!!!): http://127.0.0.1:8000/api/space/{id}/task/?main=true <br>
      Фильтрация по ответственным: http://127.0.0.1:8000/api/space/{id}/task/?responsible=1 <br>
      Поиск по названию задачи: http://127.0.0.1:8000/api/space/{id}/task/?search=Планне <br>
      Сортировка по дедлайну: http://127.0.0.1:8000/api/space/{id}/task/?ordering=deadline <br>
  - name: Персональные задачи
    description: |
      Фильтрация по тегам: http://127.0.0.1:8000/api/task_me/?tags=hard&tags=normal <br>
      Фильтрация по статусу: http://127.0.0.1:8000/api/task_me/?status=not_started <br>
      Фильтрация по акутальным задачам: http://127.0.0.1:8000/api/task_me/?actual=true <br>
      Фильтрация по main задачам (!!!выключает выборку подзадач!!!): http://127.0.0.1:8000/api/task_me/?main=true <br>
      Поиск по названию задачи: http://127.0.0.1:8000/api/task_me/?search=Планне <br>
      Сортировка по дедлайну: http://127.0.0.1:8000/api/task_me/?ordering=deadline <br>

  - name: Модель пользователя
    x-displayName: Модель пользователя
    description: |
      <SchemaDefinition schemaRef="#/components/models/User" />
  - name: Модель профиля пользователя
    x-displayName: Модель профиля пользователя
    description: |
      <SchemaDefinition schemaRef="#/components/models/Profile" />
  - name: Модель тега
    x-displayName: Модель тега
    description: |
      <SchemaDefinition schemaRef="#/components/models/Tag" />
  - name: Модель статуса
    x-displayName: Модель статуса
    description: |
      <SchemaDefinition schemaRef="#/components/models/Status" />
  - name: Модель задачи пространства
    x-displayName: Модель задачи пространства
    description: |
      <SchemaDefinition schemaRef="#/components/models/TaskSpace" />
  - name: Модель персональной задачи
    x-displayName: Модель персональной задачи
    description: |
      <SchemaDefinition schemaRef="#/components/models/TaskPersonal" />
  - name: Модель пространства
    x-displayName: Модель пространства
    description: |
      <SchemaDefinition schemaRef="#/components/models/Space" />

  - name: Привязка телеграма
    x-displayName: Модель пространства
    description: |
      https://t.me/My_first_LKX_bot?start=TOKEN

paths:
  /api/users/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Список пользователей
      description: |
        Получение списка всех пользователей. <br>
        Подключен пагинатор с 10 элементами на выводе. <br>
        Возможен поиск по username/last_name/first_name:  http://127.0.0.1:8000/users/search/lic/ <br>
      parameters:
        - name: page
          required: false
          in: query
          description: Номер страницы.
          schema:
            type: integer
        - name: limit
          required: false
          in: query
          description: Количество объектов на странице.
          schema:
            type: integer
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/users/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/users/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/User"
                    description: "Список объектов текущей страницы"
          description: ""
      tags:
        - Пользователи
    post:
      operationId: Регистрация пользователя
      description: Регистрация пользователя. Id телеграма не является обязательным
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CustomUserCreate"
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CustomUserResponseOnCreate"
          description: "Пользователь успешно создан"
        "400":
          $ref: "#/components/responses/ValidationError"
      tags:
        - Пользователи
  /api/users/{id_user}/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Информация о пользователе
      description: Информация о пользователя, допступного через его id
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный id этого пользователя"
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
          description: ""
        "404":
          $ref: "#/components/responses/NotFound"
        "401":
          $ref: "#/components/responses/AuthenticationError"
      tags:
        - Пользователи
  /api/users/me/:
    get:
      operationId: Текущий пользователь
      description: Информация текущего пользователя
      parameters: []
      security:
        - Token: []
        - Sessionid: []
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
      tags:
        - Пользователи
  /api/users/me/profile/:
    get:
    put:
  /api/users/{id_user}/profile/:
    get:
  /api/users/set_password/:
    post:
      security:
        - Token: []
        - Sessionid: []
      operationId: Изменение пароля
      description: "Изменение пароля текущего пользователя."
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SetPassword"
      responses:
        "204":
          description: "Пароль успешно изменен"
        "400":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/AuthenticationError"
      tags:
        - Пользователи
  /api/auth/login/:
    post:
      operationId: Авторизация сессии
      description: |
        Используется для авторизации по username и password. <br>
        Создает session-id и сохраняет в cookie браузера. <br>
        В заголовке нужно указать CSRF-токен (а мб и не надо). <br>
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Login"
      responses:
        "302":
          description: "Редирект на главную страницу."
      tags:
        - Пользователи
  /api/auth/login/{backend}-oauth2/:
    redirect:
      operationId: Социальная авторизация
      description: |
        Позволяет авторизоваться с помощью различных сервисов. <br>
        Доступные сервисы: yandex, mailru, google, vk. <br>
        После успешной авторизации происходит редирект на главную страницу.
      tags:
        - Пользователи
  /api/auth/token/login/:
    post:
      operationId: Получить токен авторизации
      description: |
        Используется для авторизации по username и password. <br>
        Токен используется в качестве авторизации и для некоторых эндпоинтов (телеграм). <br>
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Login"
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TokenGetResponse"
          description: ""
      tags:
        - Пользователи
  /api/auth/token/logout/:
    post:
      security:
        - Token: []
      operationId: Удаление токена
      description: Удаляет токен текущего пользователя
      parameters: []
      requestBody:
        content:
          application/json:
            schema: {}

      responses:
        "204":
          content:
            application/json:
              schema: {}
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
      tags:
        - Пользователи
  /api/auth/logout/:
    get:
      security:
        - Sessionid: []
      operationId: Удаление sessionid
      description: Удаляет sessionid текущего пользователя.
      parameters: []
      requestBody:
        content:
          application/json:
            schema: {}

      responses:
        "200":
          content:
            application/json:
              schema: {}
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
      tags:
        - Пользователи

  /api/tags/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Cписок тегов
      description: Получение списка всех тегов. Подключен пагинатор с 10 элементами на выводе
      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/tags/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/tags/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/Tag"
                    description: "Список объектов текущей страницы"
          description: ""
      tags:
        - Теги
    post:
      security:
        - Token: []
        - Sessionid: []
      operationId: Создание тега
      description: Создание тега. Доступно пока что только администраторам сервиса.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Tag"
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tag"
          description: "Тег успешно создан"
        "400":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/AuthenticationError"
      tags:
        - Теги
  /api/tags/{id_tag}/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Получение тега
      description: Получение тега по его id.
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого Тега."
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tag"
          description: ""
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Теги
    put:
      security:
        - Token: []
        - Sessionid: []
      operationId: Обновление тега
      description: "Обновление полей тега (Доступно так же Patch). Доступно пока что только администраторам сервиса"
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого тега."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Tag"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tag"
          description: "Статус успешно обновлен"
        "400":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Теги
    delete:
      security:
        - Token: []
        - Sessionid: []
      operationId: Удаление тега
      description: Удаление тега. Доступно пока что только администраторам сервиса
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого тега"
          schema:
            type: string
      responses:
        "204":
          description: "Статус успешно удален"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Теги

  /api/status/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Cписок статусов
      description: Получение списка всех статусов. Подключен пагинатор с 10 элементами на выводе
      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/status/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/status/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/Status"
                    description: "Список объектов текущей страницы"
          description: ""
      tags:
        - Статусы
    post:
      security:
        - Token: []
        - Sessionid: []
      operationId: Создание статуса
      description: Создание статуса для задач. Доступно пока что только администраторам сервиса
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Status"
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Status"
          description: "Статус успешно создан"
        "400":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
      tags:
        - Статусы
  /api/status/{id_space}/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Получение статуса
      description: Получение статуса по его id.
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого Статуса."
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Status"
          description: ""
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Статусы
    put:
      security:
        - Token: []
        - Sessionid: []
      operationId: Обновление статуса
      description: |
        Обновление полей статуса (Доступно так же Patch). <br>
        Доступно только администраторам сервиса. <br>
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого статуса."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Status"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Status"
          description: "Статус успешно обновлен"
        "400":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Статусы
    delete:
      security:
        - Token: []
        - Sessionid: []
      operationId: Удаление статуса
      description: Удаление статуса. Доступно пока что только администраторам сервиса
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого статуса"
          schema:
            type: string
      responses:
        "204":
          description: "Статус успешно удален"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Статусы

  /api/space/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Cписок пространств
      description: |
        Получение списка всех пространств. <br>
        Подключен пагинатор с 10 элементами на выводе. <br>
      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/SpaceList"
                    description: "Список объектов текущей страницы"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
      tags:
        - Пространства
    post:
      security:
        - Token: []
        - Sessionid: []
      operationId: Создание пространства
      description: |
        Создание пространства. Ну все логиШно)
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SpaceCreate"
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Space"
          description: "пространство успешно создана"
        "400":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/AuthenticationError"
      tags:
        - Пространства
  /api/space/{id_space}/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Получение пространства
      description: |
        Получение пространства по её id. <br>
        Доступно только участникам пространства. <br>
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой пространства"
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Space"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Пространства
    put:
      security:
        - Token: []
        - Sessionid: []
      operationId: Обновление пространства
      description: |
        Обновление полей пространства (Доступно так же Patch).
        Доступно только администратору пространства.
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой пространства."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SpaceCreate"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Space"
          description: "пространство успешна обновлена"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Пространства
    delete:
      security:
        - Token: []
        - Sessionid: []
      operationId: Удаление пространства
      description: |
        Удаление пространства. <br>
        Доступно только администратору пространства.
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой пространства"
          schema:
            type: string
      responses:
        "204":
          description: "пространство успешна удалена"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Пространства
  /api/space/me/:
    get:
      operationId: Список моих пространств
      description:
        Получение пространств, в которых отмечен текущий пользователь. <br>
        Подключен пагинатор с 10 элементами на выводе
      security:
        - Token: []
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой пространства."
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/SpaceList"
                    description: "Список объектов текущей страницы"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
      tags:
        - Пространства

  /api/space/{id_space}/task/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Cписок задач
      description: |
        Получение списка задач текущей пространства. <br>
        Доступно только участникам пространства <br>
        Подключен пагинатор с 10 элементами на выводе <br>
      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/{id}/task/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/{id}/task/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/TaskSpace"
                    description: "Список объектов текущей страницы"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Задачи пространства
    post:
      security:
        - Token: []
        - Sessionid: []
      operationId: Создание задачи
      description: Создание задачи
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TaskSpaceCreate"
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaskSpaceCreateResp"
          description: "Статус успешно создан"
        "400":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Задачи пространства
  /api/space/{id_space}/task/{id_task}/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Получение задачи
      description: Получение задачи по его id (Так же применяется и для подзадач)
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой задачи."
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaskSpace"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Задачи пространства
    put:
      security:
        - Token: []
        - Sessionid: []
      operationId: Обновление задачи
      description: Обновление полей задачи (Так же применяется и для подзадач). (Доступно так же Patch)
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой задачи."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TaskSpaceUpdate"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaskSpaceUpdateResp"
          description: "Задача успешна обновлена"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Задачи пространства
    delete:
      security:
        - Token: []
        - Sessionid: []
      operationId: Удаление задачи
      description: Удаление задачи (Так же применяется и для подзадач).
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой задачи"
          schema:
            type: string
      responses:
        "204":
          description: "Задача успешна удалена"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Задачи пространства
  /api/space/{id_space}/task/{id_task}/subtasks/:
    get:
      operationId: Cписок подзадач
      security:
        - Token: []
      description: |
        Получение списка подзадач этой задачи. <br>
        Доступно только участникам пространства <br>
        Подключен пагинатор с 10 элементами на выводе <br>

      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/{id}/task/{id}/subtasks/{id}?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/{id}/task/{id}/subtasks/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/SubTaskSpaceList"
                    description: "Список объектов текущей страницы"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Задачи пространства
    post:
      security:
        - Token: []
        - Sessionid: []
      operationId: Создание подзадачи
      description: Создание подзадачи
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SubTaskSpaceCreate"
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubTaskSpaceCreateResp"
          description: "Статус успешно создан"
        "400":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Задачи пространства
  /api/space/{id_space}/task/{id_task_from}/to/{id_task_to}/:
    get:
  /api/space/{id_space}/task/{id_task_id}/all_tree/:
    delete:
  /api/space/{id_space}/task/history/:
    get:
      operationId: История всех задач
      security:
        - Token: []
      description: |
        Получение списка изменений задач текущей пространства. <br>
        Доступно только участникам пространства <br>
        Подключен пагинатор с 10 элементами на выводе <br>
      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/{id}/task/history/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/{id}/task/history/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      example: [Пока хз]
                    description: "Список объектов текущей страницы"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Задачи пространства
  /api/space/{id_space}/task/{id_task}/history/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: История задачи
      description: |
        Получение списка изменений задачи текущей пространства. <br>
        Доступно только участникам пространства <br>
        Подключен пагинатор с 10 элементами на выводе <br>
      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/{id}/task/{id}/history/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/space/{id}/task/{id}/history/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      example: [Пока хз]
                    description: "Список объектов текущей страницы"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Задачи пространства

  /api/task_me/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Cписок персональных задач
      description: |
        Получение списка персональных задач <br>
        Подключен пагинатор с 10 элементами на выводе <br>
      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/task_me/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/task_me/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/TaskPersonal"
                    description: "Список объектов текущей страницы"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Персональные задачи
    post:
      security:
        - Token: []
        - Sessionid: []
      operationId: Создание задачи
      description: Создание задачи
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TaskPersonalCreate"
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaskPersonalCreateResp"
          description: "Статус успешно создан"
        "400":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Персональные задачи
  /api/task_me/spaces/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Cписок задач орагнизаций
      description: |
        Получение списка задач пространств, в которых пользователь отмечен, как ответственный. <br>
        Подключен пагинатор с 10 элементами на выводе <br>
        Фильтрация по пространства: http://127.0.0.1:8000/api/task_me/spaces/?space=1 <br>
      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/task_me/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/task_me/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/TaskPersonal"
                    description: "Список объектов текущей страницы"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "403":
          $ref: "#/components/responses/PermissionDenied"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Персональные задачи
  /api/task_me/{id_task}/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Получение задачи
      description: Получение задачи по его id (Так же применяется и для подзадач)
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой задачи."
          schema:
            type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaskPersonal"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Персональные задачи
    put:
      security:
        - Token: []
        - Sessionid: []
      operationId: Обновление задачи
      description: Обновление полей задачи (Так же применяется и для подзадач). (Доступно так же Patch)
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой задачи."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TaskPersonalUpdate"
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TaskPersonalUpdateResp"
          description: "Задача успешна обновлена"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Персональные задачи
    delete:
      security:
        - Token: []
        - Sessionid: []
      operationId: Удаление задачи
      description: Удаление задачи (только задачи)
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой задачи"
          schema:
            type: string
      responses:
        "204":
          description: "Задача успешна удалена"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Персональные задачи
  /api/task_me/{id_task}/subtasks/:
    get:
      security:
        - Token: []
        - Sessionid: []
      operationId: Cписок подзадач
      description: |
        Получение списка персональных подзадач. <br>
        Подключен пагинатор с 10 элементами на выводе. <br>
      parameters: []
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: "Общее количество объектов в базе"
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/task_me/{id}/subtasks/?page=4
                    description: "Ссылка на следующую страницу"
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://127.0.0.1:8000/api/task_me/{id}/subtasks/?page=2
                    description: "Ссылка на предыдущую страницу"
                  results:
                    type: array
                    items:
                      $ref: "#/components/schemas/SubTaskPersonalList"
                    description: "Список объектов текущей страницы"
          description: ""
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Персональные задачи
    post:
      security:
        - Token: []
        - Sessionid: []
      operationId: Создание подзадачи
      description: Создание подзадачи
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SubTaskPersonalCreate"
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SubTaskPersonalCreateResp"
          description: "Статус успешно создан"
        "400":
          $ref: "#/components/responses/ValidationError"
        "401":
          $ref: "#/components/responses/AuthenticationError"
        "404":
          $ref: "#/components/responses/NotFound"
      tags:
        - Персональные задачи
  /api/task_me/{id_task_from}/to/{id_task_to}/:
    get:
  /api/task_me/{id_task}/all_tree/:
    delete:
      security:
        - Token: []
        - Sessionid: []
      operationId: Удаление дерева задачи
      description: Удаление задачи (Так же применяется и для подзадач)
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой задачи"
          schema:
            type: string
      responses:
        "204":
          description: "Задача успешна удалена"
        "401":
          $ref: "#/components/responses/AuthenticationError"
      tags:
        - Персональные задачи

components:
  schemas:
    User:
      description: "Пользователь"
      type: object
      properties:
        email:
          type: string
          format: email
          maxLength: 254
          description: "Адрес электронной почты"
          example: "ignasi_grad@yandex.ru"
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: "Уникальный username"
          pattern: ^[\w.@+-]+\z
          maxLength: 150
          example: "ignasii.gradusov"
        first_name:
          type: string
          maxLength: 150
          description: "Имя"
          example: "Игнасий"
        last_name:
          type: string
          maxLength: 150
          description: "Фамилия"
          example: "Градусов"
        color:
          type: string
          pattern: ^[-A-F0-9]+$
          maxLength: 7
          description: Цвет тега в HEX-формате
          example: "#00FF00"
      required:
        - username
        - email
        - first_name
        - last_name
    Tag:
      type: object
      $ref: "#/components/models/Tag"
    Status:
      type: object
      $ref: "#/components/models/Status"

    Space:
      type: object
      $ref: "#/components/models/Space"
    SpaceList:
      properties:
        id:
          externalDocs:
            description: Id пространства
          description: Id пространства
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название пространства
          maxLength: 200
          type: string
          example: Planer o_0
        admin:
          description: Администратор пространства
          allOf:
            - $ref: "#/components/schemas/User"
      type: object
    SpaceCreate:
      type: object
      required:
        - name
      properties:
        name:
          description: Название пространства
          maxLength: 200
          type: string
          example: Planer o_0
        staff:
          description: Сотрудники пространства (id)
          minItems: 0
          xml:
            name: tag
            wrapped: true
          type: array
          example: [1]
          items:
            type: integer

    TaskSpace:
      type: object
      required:
        - name
        - author
        - space
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Планнер
        description:
          description: Описание задачи
          type: string
          example: Создание собственного сервиса по созданию плана
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        space:
          description: пространство, в которой находится задача
          allOf:
            - $ref: "#/components/schemas/SpaceList"
        responsible:
          description: Исполнители задачи
          minItems: 0
          xml:
            name: user
            wrapped: true
          items:
            $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 15.08.2023
        subtasks:
          description: Подзадачи
          allOf:
            - $ref: "#/components/schemas/SubTaskSpaceList"
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    TaskSpaceCreate:
      required:
        - name
        - description
        - status
        - space
      type: object
      properties:
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Планнер
        description:
          description: Описание задачи
          type: string
          example: Создание собственного сервиса по созданию плана
        status:
          description: Статус задачи
          example: 1
        space:
          description: пространство, в которой находится задача
          example: 1
        responsible:
          description: Исполнители задачи
          minItems: 0
          type: array
          xml:
            name: user
            wrapped: true
          example: [0]
          items:
            type: integer
        deadline:
          type: datetime
          description: Время дедлайна
          example: 15.08.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          type: array
          example: [1]
          items:
            type: integer
    TaskSpaceCreateResp:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Планнер
        description:
          description: Описание задачи
          type: string
          example: Создание собственного сервиса по созданию плана
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        space:
          description: пространство, в которой находится задача
          allOf:
            - $ref: "#/components/schemas/SpaceList"
        responsible:
          description: Исполнители задачи
          minItems: 0
          xml:
            name: user
            wrapped: true
          items:
            $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 15.08.2023
        subtasks:
          description: Подзадачи
          example: []
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    TaskSpaceUpdate:
      required:
        - name
        - author
        - space
      type: object
      properties:
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Планнер
        description:
          description: Описание задачи
          type: string
          example: Создание собственного сервиса по созданию плана,
            публикация в общем доступе и его реклама
        status:
          description: Статус задачи
          example: 1
        space:
          description: пространство, в которой находится задача
          example: 1
        responsible:
          description: Исполнители задачи
          minItems: 0
          type: array
          xml:
            name: user
            wrapped: true
          example: [0]
          items:
            type: integer
        deadline:
          type: datetime
          description: Время дедлайна
          example: 15.08.2025
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          type: array
          example: [1]
          items:
            type: integer
    TaskSpaceUpdateResp:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Планнер
        description:
          description: Описание задачи
          type: string
          example: Создание собственного сервиса по созданию плана,
            публикация в общем доступе и его реклама
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        space:
          description: пространство, в которой находится задача
          allOf:
            - $ref: "#/components/schemas/SpaceList"
        responsible:
          description: Исполнители задачи
          minItems: 0
          xml:
            name: user
            wrapped: true
          items:
            $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 15.08.2025
        subtasks:
          description: Подзадачи
          example: []
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    SubTaskSpaceList:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Разработка бэкенда
        description:
          description: Описание задачи
          type: string
          example: Разработать бэкенд-часть планнера на Django
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        responsible:
          description: Исполнители задачи
          minItems: 0
          xml:
            name: user
            wrapped: true
          items:
            $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 12.12.2022
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    SubTaskSpaceCreate:
      required:
        - name
      type: object
      properties:
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Разработка бэкенда
        description:
          description: Описание задачи
          type: string
          example: Разработать бэкенд-часть планнера на Django
        status:
          description: Статус задачи
          example: 1
        space:
          description: пространство, в которой находится задача
          example: 1
        responsible:
          description: Исполнители задачи
          minItems: 0
          type: array
          xml:
            name: user
            wrapped: true
          example: [0]
          items:
            type: integer
        deadline:
          type: datetime
          description: Время дедлайна
          example: 15.08.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          type: array
          example: [1]
    SubTaskSpaceCreateResp:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Разработка бэкенда
        description:
          description: Описание задачи
          type: string
          example: Разработать бэкенд-часть планнера на Django
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        space:
          description: пространство, в которой находится задача
          allOf:
            - $ref: "#/components/schemas/SpaceList"
        responsible:
          description: Исполнители задачи
          minItems: 0
          xml:
            name: user
            wrapped: true
          items:
            $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 15.08.2023
        subtasks:
          description: Подзадачи
          example: []
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    SubTaskSpaceUpdate:
      required:
        - name
      type: object
      properties:
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Разработка бэкенда и фротенда
        description:
          description: Описание задачи
          type: string
          example: Разработать бэкенд-часть планнера на Django,
            а так же и написание вертски
        status:
          description: Статус задачи
          example: 1
        space:
          description: пространство, в которой находится задача
          example: 1
        responsible:
          description: Исполнители задачи
          minItems: 0
          type: array
          xml:
            name: user
            wrapped: true
          example: [0]
          items:
            type: integer
        deadline:
          type: datetime
          description: Время дедлайна
          example: 25.08.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          type: array
          example: [1]
    SubTaskSpaceUpdateResp:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Разработка бэкенда и фротенда
        description:
          description: Описание задачи
          type: string
          example: Разработать бэкенд-часть планнера на Django,
            а так же и написание вертски
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        space:
          description: пространство, в которой находится задача
          allOf:
            - $ref: "#/components/schemas/SpaceList"
        responsible:
          description: Исполнители задачи
          minItems: 0
          xml:
            name: user
            wrapped: true
          items:
            $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 25.08.2023
        subtasks:
          description: Подзадачи
          example: []
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"

    TaskPersonal:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Сессия
        description:
          description: Описание задачи
          type: string
          example: Успешная сдача сессии. Подготовка к сессии
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 21.06.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    TaskPersonalCreate:
      type: object
      properties:
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Сессия
        description:
          description: Описание задачи
          type: string
          example: Успешная сдача сессии. Подготовка к сессии
        status:
          description: Статус задачи
          example: 1
        deadline:
          type: datetime
          description: Время дедлайна
          example: 21.06.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          type: array
          example: [1]
          items:
            type: integer
    TaskPersonalCreateResp:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Сессия
        description:
          description: Описание задачи
          type: string
          example: Успешная сдача сессии. Подготовка к сессии
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 21.06.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    TaskPersonalUpdate:
      type: object
      properties:
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Сессия
        description:
          description: Описание задачи
          type: string
          example: Успешная сдача сессии. Подготовка к сессии.
            Закрытие всех зачетов и прохождение практики
        status:
          description: Статус задачи
          example: 1
        deadline:
          type: datetime
          description: Время дедлайна
          example: 17.07.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          type: array
          example: [1]
          items:
            type: integer
    TaskPersonalUpdateResp:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Сессия
        description:
          description: Описание задачи
          type: string
          example: Успешная сдача сессии. Подготовка к сессии.
            Закрытие всех зачетов и прохождение практики
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 17.07.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    SubTaskPersonalList:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Сессия
        description:
          description: Описание задачи
          type: string
          example: Успешная сдача сессии. Подготовка к сессии.
            Закрытие всех зачетов и прохождение практики
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 17.07.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    SubTaskPersonalResp:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Изучение математики
        description:
          description: Описание задачи
          type: string
          example: Изучение тер-вера, ДУ и линейной алгебры
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 10.06.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    SubTaskPersonalCreate:
      type: object
      properties:
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Изучение математики
        description:
          description: Описание задачи
          type: string
          example: Изучение тер-вера, ДУ и линейной алгебры
        status:
          description: Статус задачи
          example: 1
        deadline:
          type: datetime
          description: Время дедлайна
          example: 10.06.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          type: array
          example: [1]
          items:
            type: integer
    SubTaskPersonalCreateResp:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Изучение математики
        description:
          description: Описание задачи
          type: string
          example: Изучение тер-вера, ДУ и линейной алгебры
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 10.06.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
    SubTaskPersonalUpdate:
      type: object
      properties:
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Изучение математики
        description:
          description: Описание задачи
          type: string
          example: Изучение тер-вера, ДУ, линейной алгебры и интегрирования
        status:
          description: Статус задачи
          example: 1
        deadline:
          type: datetime
          description: Время дедлайна
          example: 20.06.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          type: array
          example: [1]
          items:
            type: integer
    SubTaskPersonalUpdateResp:
      type: object
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Изучение математики
        description:
          description: Описание задачи
          type: string
          example: Изучение тер-вера, ДУ, линейной алгебры и интегрирования
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 20.06.2023
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"

    CustomUserCreate:
      type: object
      $ref: "#/components/models/User"
    CustomUserResponseOnCreate:
      type: object
      properties:
        email:
          type: string
          format: email
          maxLength: 254
          description: "Адрес электронной почты"
          example: "ignasi_grad@yandex.ru"
        id:
          type: integer
          readOnly: true
        username:
          type: string
          description: "Уникальный юзернейм"
          pattern: ^[\w.@+-]+\z
          maxLength: 150
          example: "ignasii.gradusov"
        first_name:
          type: string
          maxLength: 150
          description: "Имя"
          example: "Игнасий"
        last_name:
          type: string
          maxLength: 150
          description: "Фамилия"
          example: "Градусов"
        color:
          type: string
          pattern: ^[-A-F0-9]+$
          maxLength: 7
          description: Цвет тега в HEX-формате
          example: "#00FF00"
      required:
        - username
        - first_name
        - last_name
        - email
    SendEmailReset:
      type: object
      properties:
        email:
          type: string
          format: email
      required:
        - email
    PasswordResetConfirm:
      type: object
      properties:
        uid:
          type: string
        token:
          type: string
        new_password:
          type: string
      required:
        - uid
        - token
        - new_password
    UsernameResetConfirm:
      type: object
      properties:
        new_email:
          type: string
          format: email
          maxLength: 254
    SetPassword:
      type: object
      properties:
        new_password:
          type: string
        current_password:
          type: string
      required:
        - new_password
        - current_password
    SetUsername:
      type: object
      properties:
        current_password:
          type: string
        new_email:
          type: string
          format: email
          maxLength: 254
      required:
        - current_password
    Login:
      type: object
      properties:
        password:
          type: string
        username:
          type: string
    TokenGetResponse:
      type: object
      properties:
        auth_token:
          type: string

    ValidationError:
      description: Стандартные ошибки валидации DRF
      type: object
      properties:
        field_name:
          description: "Название поля, в котором произошли ошибки. Таких полей может быть несколько"
          example: ["Обязательное поле."]
          type: array
          items:
            type: string
    SelfMadeError:
      description: Ошибка
      type: object
      properties:
        errors:
          description: "Описание ошибки"
          type: string
    AuthenticationError:
      description: Пользователь не авторизован
      type: object
      properties:
        detail:
          description: "Описание ошибки"
          example: "Учетные данные не были предоставлены."
          type: string
    PermissionDenied:
      description: Недостаточно прав
      type: object
      properties:
        detail:
          description: "Описание ошибки"
          example: "У вас недостаточно прав для выполнения данного действия."
          type: string
    NotFound:
      description: Объект не найден
      type: object
      properties:
        detail:
          description: "У вас недостаточно прав"
          example: "Страница не найдена."
          type: string

  models:
    User:
      type: object
      properties:
        id:
          type: integer
          externalDocs:
            description: Id пользователя
          description: Id пользователя
          readOnly: true
        email:
          type: string
          format: email
          maxLength: 254
          description: "Адрес электронной почты"
          example: "ignasi_grad@yandex.ru"
        username:
          type: string
          description: "Уникальный username"
          pattern: ^[\w.@+-]+\z
          maxLength: 150
          example: "ignasii.gradusov"
        first_name:
          type: string
          maxLength: 150
          description: "Имя пользователя"
          example: "Игнасий"
        last_name:
          type: string
          maxLength: 150
          description: "Фамилия пользователя"
          example: "Градусов"
        password:
          type: string
          maxLength: 150
          description: "Пароль пользователя"
          example: "Qwerty123"
      required:
        - username
        - password
        - first_name
        - last_name
        - email
    Profile:
      type: object
      properties:
        user:
          description: Пользователь
          allOf:
            - $ref: "#/components/schemas/User"
        avatar:
          type: base64
          description: "Аватарка пользователя"
        time_zone:
          type: integer
          description: Часовой пояс
          example: 8
        color:
          type: string
          pattern: ^[-A-F0-9]+$
          maxLength: 7
          description: Цвет тега в HEX-формате
          example: "#FF0000"

    Tag:
      type: object
      required:
        - slug
        - name
        - color
      properties:
        id:
          externalDocs:
            description: Id тега
          description: Id тега
          type: integer
          readOnly: true
          example: 1
        slug:
          description: Slug тега
          maxLength: 200
          pattern: ^[-a-zA-Z0-9_]+$
          type: string
          example: hard
        name:
          description: Название тега
          type: string
          example: Сложно
          maxLength: 200
        color:
          type: string
          pattern: ^[-A-F0-9]+$
          maxLength: 7
          description: Цвет тега в HEX-формате
          example: "#FF0000"
    Status:
      type: object
      required:
        - slug
        - name
        - color
      properties:
        id:
          externalDocs:
            description: Id тега
          description: Id тега
          type: integer
          readOnly: true
          example: 1
        slug:
          description: Slug статуса
          maxLength: 200
          pattern: ^[-a-zA-Z0-9_]+$
          type: string
          example: in_progress
        name:
          description: Название статуса
          maxLength: 200
          type: string
          example: В процессе
        color:
          type: string
          pattern: ^[-A-F0-9]+$
          maxLength: 7
          description: Цвет статуса в HEX-формате
          example: "#00F154"
    Space:
      type: object
      required:
        - name
        - admin
      properties:
        id:
          externalDocs:
            description: Id пространства
          description: Id пространства
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название пространства
          maxLength: 200
          type: string
          example: Planer o_0
        admin:
          description: Администратор пространства
          allOf:
            - $ref: "#/components/schemas/User"
        staff:
          description: Сотрудники пространства
          minItems: 1
          xml:
            name: user
            wrapped: true
          items:
            $ref: "#/components/schemas/User"
        avatar:
          type: base64
          description: "Аватарка пользователя"

    TaskSpace:
      type: object
      required:
        - author
        - space
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Планнер
        description:
          description: Описание задачи
          type: string
          example: Создание собственного сервиса по созданию плана
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        space:
          description: пространство, в которой находится задача
          allOf:
            - $ref: "#/components/models/Space"
        responsible:
          description: Исполнители задачи
          minItems: 0
          xml:
            name: user
            wrapped: true
          items:
            $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 15.08.2023
        created:
          type: datetime
          description: Дата создания
          example: 01.08.2023
        updated:
          type: datetime
          description: Дата обновления
          example: 12.08.2023
        parent:
          description: Родитель
          allOf:
            - $ref: "#/components/models/TaskSpace"
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"
        history:
          description: История изменения задачи
          example: я где то описывал это, но опять лЭнь XD
          type: <HistoricalTaskSpace>
          readOnly: true
    TaskPersonal:
      type: object
      required:
        - author
      properties:
        id:
          externalDocs:
            description: Id задачи
          description: Id задачи
          type: integer
          readOnly: true
          example: 1
        name:
          description: Название задачи
          maxLength: 200
          type: string
          example: Сессия
        description:
          description: Описание задачи
          type: string
          example: Успешная сдача сессии. Подготовка к сессии
        status:
          description: Статус задачи
          allOf:
            - $ref: "#/components/models/Status"
        author:
          description: Автор задачи
          allOf:
            - $ref: "#/components/schemas/User"
        deadline:
          type: datetime
          description: Время дедлайна
          example: 21.06.2023
        parent:
          description: Родитель
          allOf:
            - $ref: "#/components/models/TaskPersonal"
        tags:
          description: Теги задачи
          minItems: 0
          xml:
            name: tag
            wrapped: true
          items:
            $ref: "#/components/models/Tag"

  responses:
    ValidationError:
      description: "Ошибки валидации в стандартном формате DRF"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ValidationError"
    AuthenticationError:
      description: Пользователь не авторизован
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/AuthenticationError"
    PermissionDenied:
      description: Недостаточно прав
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/PermissionDenied"
    NotFound:
      description: Объект не найден
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/NotFound"

  securitySchemes:
    Token:
      description: |
        Авторизация по токену. <br>
        Запрос от имени пользователя должен выполняться
        с заголовком "Authorization: Token *TOKEN_VALUE*"'
      type: http
      scheme: token
    Sessionid:
      description: |
        Авторизация по сессии. <br>
        Запрос от имени пользователя должен выполняться
        в режиме сессии. В cookie должно передаваться "sessionid=SESSION_TOKEN"
      type: http
      scheme: sessionid

x-tagGroups:
  - name: API
    tags:
      - Пользователи
      - Теги
      - Статусы
      - Пространства
      - Задачи пространства
      - История задач пространства
      - Персональные задачи
  - name: Models
    tags:
      - Модель пользователя
      - Модель профиля пользователя
      - Модель тега
      - Модель статуса
      - Модель пространства
      - Модель задачи пространства
      - Модель персональной задачи
  - name: Others
    tags:
      - Привязка телеграма
