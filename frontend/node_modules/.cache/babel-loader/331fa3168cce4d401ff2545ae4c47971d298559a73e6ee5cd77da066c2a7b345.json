{"ast":null,"code":"import axios from \"axios\";\nimport Cookies from \"js-cookie\";\nimport { API_URL } from \"@shared/config\";\nclass ApiInstance {\n  constructor() {\n    this.axios = void 0;\n    this.axios = axios.create({\n      withCredentials: true,\n      baseURL: API_URL,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      xsrfHeaderName: \"X-CSRFToken\"\n    });\n    this.axios.interceptors.request.use(config => {\n      if (config.method.toLowerCase() === \"post\") {\n        const token = Cookies.get(\"csrftoken\");\n        if (token) {\n          config.headers.set(config.xsrfHeaderName, token);\n        }\n      }\n      return config;\n    });\n  }\n  async get(endpoint, options = {}) {\n    try {\n      const response = await this.axios.get(endpoint, options);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async post(endpoint, data, options = {}) {\n    try {\n      const response = await this.axios.post(endpoint, data, options);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async patch(endpoint, data, options = {}) {\n    try {\n      const response = await this.axios.patch(endpoint, data, options);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }\n}\nexport const apiInstance = new ApiInstance();","map":{"version":3,"names":["axios","Cookies","API_URL","ApiInstance","constructor","create","withCredentials","baseURL","headers","xsrfHeaderName","interceptors","request","use","config","method","toLowerCase","token","get","set","endpoint","options","response","data","error","post","patch","apiInstance"],"sources":["D:/Mega/Planner/frontend/src/shared/api/base.ts"],"sourcesContent":["import axios, {\r\n    AxiosInstance,\r\n    AxiosRequestConfig,\r\n    AxiosResponse, InternalAxiosRequestConfig,\r\n} from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport {API_URL} from \"@shared/config\";\r\n\r\nclass ApiInstance {\r\n    private axios: AxiosInstance;\r\n\r\n    constructor() {\r\n        this.axios = axios.create({\r\n            withCredentials: true,\r\n            baseURL: API_URL,\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            xsrfHeaderName: \"X-CSRFToken\"\r\n        });\r\n\r\n        this.axios.interceptors.request.use((config: InternalAxiosRequestConfig) => {\r\n            if(config.method!.toLowerCase() === \"post\") {\r\n                const token = Cookies.get(\"csrftoken\");\r\n                if(token) {\r\n                    config.headers.set(config.xsrfHeaderName, token);\r\n                }\r\n            }\r\n\r\n            return config;\r\n        });\r\n    }\r\n\r\n    async get<T>(endpoint: string, options: AxiosRequestConfig = {}): Promise<T> {\r\n        try {\r\n            const response: AxiosResponse<T> = await this.axios.get(\r\n                endpoint,\r\n                options\r\n            );\r\n            return response.data;\r\n        }\r\n        catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async post<T>(endpoint: string, data: any, options: AxiosRequestConfig = {}): Promise<T> {\r\n        try {\r\n            const response: AxiosResponse<T> = await this.axios.post(\r\n                endpoint,\r\n                data,\r\n                options\r\n            );\r\n            return response.data;\r\n        }\r\n        catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    async patch<T>(endpoint: string, data: any, options: AxiosRequestConfig = {}): Promise<T> {\r\n        try {\r\n            const response: AxiosResponse<T> = await this.axios.patch(\r\n                endpoint,\r\n                data,\r\n                options\r\n            );\r\n            return response.data;\r\n        }\r\n        catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n}\r\n\r\nexport const apiInstance = new ApiInstance();"],"mappings":"AAAA,OAAOA,KAAK,MAIL,OAAO;AACd,OAAOC,OAAO,MAAM,WAAW;AAC/B,SAAQC,OAAO,QAAO,gBAAgB;AAEtC,MAAMC,WAAW,CAAC;EAGdC,WAAWA,CAAA,EAAG;IAAA,KAFNJ,KAAK;IAGT,IAAI,CAACA,KAAK,GAAGA,KAAK,CAACK,MAAM,CAAC;MACtBC,eAAe,EAAE,IAAI;MACrBC,OAAO,EAAEL,OAAO;MAChBM,OAAO,EAAE;QACL,cAAc,EAAE;MACpB,CAAC;MACDC,cAAc,EAAE;IACpB,CAAC,CAAC;IAEF,IAAI,CAACT,KAAK,CAACU,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAkC,IAAK;MACxE,IAAGA,MAAM,CAACC,MAAM,CAAEC,WAAW,CAAC,CAAC,KAAK,MAAM,EAAE;QACxC,MAAMC,KAAK,GAAGf,OAAO,CAACgB,GAAG,CAAC,WAAW,CAAC;QACtC,IAAGD,KAAK,EAAE;UACNH,MAAM,CAACL,OAAO,CAACU,GAAG,CAACL,MAAM,CAACJ,cAAc,EAAEO,KAAK,CAAC;QACpD;MACJ;MAEA,OAAOH,MAAM;IACjB,CAAC,CAAC;EACN;EAEA,MAAMI,GAAGA,CAAIE,QAAgB,EAAEC,OAA2B,GAAG,CAAC,CAAC,EAAc;IACzE,IAAI;MACA,MAAMC,QAA0B,GAAG,MAAM,IAAI,CAACrB,KAAK,CAACiB,GAAG,CACnDE,QAAQ,EACRC,OACJ,CAAC;MACD,OAAOC,QAAQ,CAACC,IAAI;IACxB,CAAC,CACD,OAAOC,KAAK,EAAE;MACV,MAAMA,KAAK;IACf;EACJ;EAEA,MAAMC,IAAIA,CAAIL,QAAgB,EAAEG,IAAS,EAAEF,OAA2B,GAAG,CAAC,CAAC,EAAc;IACrF,IAAI;MACA,MAAMC,QAA0B,GAAG,MAAM,IAAI,CAACrB,KAAK,CAACwB,IAAI,CACpDL,QAAQ,EACRG,IAAI,EACJF,OACJ,CAAC;MACD,OAAOC,QAAQ,CAACC,IAAI;IACxB,CAAC,CACD,OAAOC,KAAK,EAAE;MACV,MAAMA,KAAK;IACf;EACJ;EAEA,MAAME,KAAKA,CAAIN,QAAgB,EAAEG,IAAS,EAAEF,OAA2B,GAAG,CAAC,CAAC,EAAc;IACtF,IAAI;MACA,MAAMC,QAA0B,GAAG,MAAM,IAAI,CAACrB,KAAK,CAACyB,KAAK,CACrDN,QAAQ,EACRG,IAAI,EACJF,OACJ,CAAC;MACD,OAAOC,QAAQ,CAACC,IAAI;IACxB,CAAC,CACD,OAAOC,KAAK,EAAE;MACV,MAAMA,KAAK;IACf;EACJ;AACJ;AAEA,OAAO,MAAMG,WAAW,GAAG,IAAIvB,WAAW,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}