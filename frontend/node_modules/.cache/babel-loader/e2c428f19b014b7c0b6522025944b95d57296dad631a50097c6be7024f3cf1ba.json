{"ast":null,"code":"import { create } from \"zustand\";\nimport { persist } from \"zustand/middleware\";\nclass SessionStore {\n  constructor() {\n    this.store = void 0;\n    this.useSession = () => this.store(state => !!state.session);\n    this.setUser = session => this.store.getState().setUser(session);\n    this.removeUser = () => this.store.getState().removeUser();\n    this.store = create()(persist((set, get) => ({\n      session: null,\n      setUser: session => {\n        set({\n          session: session\n        });\n      },\n      removeUser: () => {\n        set({\n          session: null\n        });\n      }\n    }), {\n      name: \"sessionStorage\",\n      onRehydrateStorage: () => state => {\n        (state === null || state === void 0 ? void 0 : state.session) && set();\n        // console.log(\"rehydrate\", state);\n      }\n    }));\n  }\n}\n\nexport const sessionStore = new SessionStore();","map":{"version":3,"names":["create","persist","SessionStore","constructor","store","useSession","state","session","setUser","getState","removeUser","set","get","name","onRehydrateStorage","sessionStore"],"sources":["D:/Mega/Planner/frontend/src/entities/session/store.ts"],"sourcesContent":["import {create} from \"zustand\";\r\nimport {persist} from \"zustand/middleware\";\r\n\r\ninterface ISessionState {\r\n    session: string | null;\r\n\r\n    setUser: (session: string) => void;\r\n    removeUser: () => void;\r\n}\r\n\r\nclass SessionStore {\r\n    private store;\r\n\r\n    constructor() {\r\n        this.store = create<ISessionState>()(\r\n            persist(\r\n                (set, get) => ({\r\n                    session: null,\r\n\r\n                    setUser: (session: string) => {\r\n                        set({session: session});\r\n                    },\r\n\r\n                    removeUser: () => {\r\n                        set({session: null});\r\n                    }\r\n                }),\r\n                {\r\n                    name: \"sessionStorage\",\r\n                    onRehydrateStorage: () => state => {\r\n                        state?.session && (set())\r\n                        // console.log(\"rehydrate\", state);\r\n                    }\r\n                }\r\n            )\r\n        );\r\n    }\r\n\r\n    useSession = () => this.store(state => !!state.session);\r\n    setUser = (session: string) => this.store.getState().setUser(session);\r\n    removeUser = () => this.store.getState().removeUser();\r\n}\r\n\r\nexport const sessionStore = new SessionStore();"],"mappings":"AAAA,SAAQA,MAAM,QAAO,SAAS;AAC9B,SAAQC,OAAO,QAAO,oBAAoB;AAS1C,MAAMC,YAAY,CAAC;EAGfC,WAAWA,CAAA,EAAG;IAAA,KAFNC,KAAK;IAAA,KA2BbC,UAAU,GAAG,MAAM,IAAI,CAACD,KAAK,CAACE,KAAK,IAAI,CAAC,CAACA,KAAK,CAACC,OAAO,CAAC;IAAA,KACvDC,OAAO,GAAID,OAAe,IAAK,IAAI,CAACH,KAAK,CAACK,QAAQ,CAAC,CAAC,CAACD,OAAO,CAACD,OAAO,CAAC;IAAA,KACrEG,UAAU,GAAG,MAAM,IAAI,CAACN,KAAK,CAACK,QAAQ,CAAC,CAAC,CAACC,UAAU,CAAC,CAAC;IA1BjD,IAAI,CAACN,KAAK,GAAGJ,MAAM,CAAgB,CAAC,CAChCC,OAAO,CACH,CAACU,GAAG,EAAEC,GAAG,MAAM;MACXL,OAAO,EAAE,IAAI;MAEbC,OAAO,EAAGD,OAAe,IAAK;QAC1BI,GAAG,CAAC;UAACJ,OAAO,EAAEA;QAAO,CAAC,CAAC;MAC3B,CAAC;MAEDG,UAAU,EAAEA,CAAA,KAAM;QACdC,GAAG,CAAC;UAACJ,OAAO,EAAE;QAAI,CAAC,CAAC;MACxB;IACJ,CAAC,CAAC,EACF;MACIM,IAAI,EAAE,gBAAgB;MACtBC,kBAAkB,EAAEA,CAAA,KAAMR,KAAK,IAAI;QAC/B,CAAAA,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEC,OAAO,KAAKI,GAAG,CAAC,CAAE;QACzB;MACJ;IACJ,CACJ,CACJ,CAAC;EACL;AAKJ;;AAEA,OAAO,MAAMI,YAAY,GAAG,IAAIb,YAAY,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}