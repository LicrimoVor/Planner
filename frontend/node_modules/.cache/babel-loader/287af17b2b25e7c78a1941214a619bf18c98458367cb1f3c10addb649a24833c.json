{"ast":null,"code":"var _jsxFileName = \"D:\\\\Mega\\\\Planner\\\\frontend\\\\src\\\\shared\\\\hooks\\\\table\\\\useTaskTableColumns.tsx\",\n  _s = $RefreshSig$();\nimport { createColumnHelper } from \"@tanstack/react-table\";\nimport { TaskName } from \"@entities/task\";\nimport { TaskTrait } from \"@entities/trait\";\nimport React from \"react\";\nimport { useQueryClient } from \"@tanstack/react-query\";\nimport { TaskTableCell } from \"@shared/ui\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function useTaskTableColumns(props) {\n  _s();\n  const {\n    extendedColumns,\n    extendAfter,\n    apiGetSubtasks,\n    apiUpdateTask\n  } = props;\n  const queryClient = useQueryClient();\n  const {\n    mutate: updateMutation,\n    isError: isUpdateError,\n    error: updateError\n  } = apiUpdateTask(queryClient);\n  const columnHelper = createColumnHelper();\n  const columns = [columnHelper.accessor(task => task, {\n    header: \"Название\",\n    cell: context => /*#__PURE__*/_jsxDEV(TaskTableCell, {\n      children: /*#__PURE__*/_jsxDEV(TaskName, {\n        onExpand: e => {},\n        onAddSubtask: e => {},\n        onChange: e => {\n          updateMutation({\n            taskId: context.getValue().id,\n            task: {\n              name: e.target.innerText\n            }\n          });\n        },\n        name: context.getValue().name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 58\n    }, this)\n  }), columnHelper.accessor(({\n    status\n  }) => status, {\n    header: \"Статус\",\n    cell: context => context.getValue() && /*#__PURE__*/_jsxDEV(TaskTableCell, {\n      children: /*#__PURE__*/_jsxDEV(TaskTrait, {\n        trait: context.getValue()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 87\n    }, this)\n  }), columnHelper.accessor(({\n    tags\n  }) => tags, {\n    header: \"Теги\",\n    cell: context => {\n      var _context$getValue;\n      return (_context$getValue = context.getValue()) === null || _context$getValue === void 0 ? void 0 : _context$getValue.map(tag => /*#__PURE__*/_jsxDEV(TaskTableCell, {\n        children: /*#__PURE__*/_jsxDEV(TaskTrait, {\n          trait: tag\n        }, tag.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 25\n      }, this));\n    }\n  }), columnHelper.accessor(({\n    deadline\n  }) => deadline, {\n    header: \"Дедлайн\"\n  }), columnHelper.accessor(({\n    description\n  }) => description, {\n    header: \"Описание\"\n  })];\n  switch (extendAfter) {\n    case -1:\n      {\n        return [...columns, ...extendedColumns];\n      }\n    case 0:\n      {\n        return [...extendedColumns, ...columns];\n      }\n    default:\n      {\n        return [...columns.slice(0, extendAfter), ...extendedColumns, ...columns.slice(extendAfter + 1)];\n      }\n  }\n}\n_s(useTaskTableColumns, \"4R+oYVB2Uc11P7bp1KcuhpkfaTw=\", false, function () {\n  return [useQueryClient];\n});","map":{"version":3,"names":["createColumnHelper","TaskName","TaskTrait","React","useQueryClient","TaskTableCell","jsxDEV","_jsxDEV","useTaskTableColumns","props","_s","extendedColumns","extendAfter","apiGetSubtasks","apiUpdateTask","queryClient","mutate","updateMutation","isError","isUpdateError","error","updateError","columnHelper","columns","accessor","task","header","cell","context","children","onExpand","e","onAddSubtask","onChange","taskId","getValue","id","name","target","innerText","fileName","_jsxFileName","lineNumber","columnNumber","status","trait","tags","_context$getValue","map","tag","deadline","description","slice"],"sources":["D:/Mega/Planner/frontend/src/shared/hooks/table/useTaskTableColumns.tsx"],"sourcesContent":["import {CellContext, ColumnDef, createColumnHelper } from \"@tanstack/react-table\";\r\nimport {ITask, TaskName, UpdateTaskProps} from \"@entities/task\";\r\nimport {ITaskStatus} from \"@entities/status\";\r\nimport { TaskTrait } from \"@entities/trait\";\r\nimport React from \"react\";\r\nimport {ITaskTag} from \"@entities/tag\";\r\nimport {QueryClient, UseMutationResult, useQueryClient, UseQueryResult} from \"@tanstack/react-query\";\r\nimport {IPaginatorResponse} from \"@shared/api\";\r\nimport {TaskTableCell} from \"@shared/ui\";\r\n\r\nexport function useTaskTableColumns<Task extends ITask, TaskUpdate extends ITask<number, number>>(props: {\r\n    extendedColumns: ColumnDef<Task,  any>[];\r\n    extendAfter: number;\r\n\r\n    apiGetSubtasks: (task_id: number) => UseQueryResult<IPaginatorResponse<Task>>;\r\n    apiUpdateTask: (queryClient: QueryClient) => UseMutationResult<Task, Error, UpdateTaskProps<TaskUpdate>>;\r\n}): ColumnDef<Task, any>[] {\r\n    const {\r\n        extendedColumns, extendAfter,\r\n        apiGetSubtasks, apiUpdateTask\r\n    } = props;\r\n\r\n    const queryClient = useQueryClient();\r\n\r\n    const {\r\n        mutate: updateMutation,\r\n        isError: isUpdateError,\r\n        error: updateError\r\n    } = apiUpdateTask(queryClient);\r\n\r\n    const columnHelper = createColumnHelper<Task>();\r\n    const columns: ColumnDef<Task,  any>[] = [\r\n        columnHelper.accessor((task) => task, {\r\n            header: \"Название\",\r\n            cell: (context: CellContext<Task, Task>) => (<TaskTableCell>\r\n                <TaskName\r\n                    onExpand={(e) => {\r\n\r\n                    }}\r\n                    onAddSubtask={(e) => {\r\n\r\n                    }}\r\n                    onChange={(e) => {\r\n                        updateMutation({\r\n                            taskId: context.getValue().id,\r\n                            task: {\r\n                                name: e.target.innerText\r\n                            } as Partial<TaskUpdate>\r\n                        });\r\n                    }}\r\n                    name={context.getValue().name}\r\n                />\r\n            </TaskTableCell>)\r\n        }),\r\n        columnHelper.accessor(({status}) => status, {\r\n            header: \"Статус\",\r\n            cell: (context: CellContext<Task, ITaskStatus>) => context.getValue() && (<TaskTableCell>\r\n                <TaskTrait trait={context.getValue()} />\r\n            </TaskTableCell>)\r\n        }),\r\n        columnHelper.accessor(({tags}) => tags, {\r\n            header: \"Теги\",\r\n            cell: (context: CellContext<Task, ITaskTag[]>) => context.getValue()?.map(\r\n                tag => (<TaskTableCell>\r\n                    <TaskTrait key={tag.id} trait={tag} />\r\n                </TaskTableCell>)\r\n            )\r\n        }),\r\n        columnHelper.accessor(({deadline}) => deadline, {\r\n            header: \"Дедлайн\",\r\n        }),\r\n        columnHelper.accessor(({description}) => description, {\r\n            header: \"Описание\",\r\n        }),\r\n    ];\r\n\r\n    switch(extendAfter) {\r\n        case -1: {\r\n            return [\r\n                ...columns,\r\n                ...extendedColumns\r\n            ]\r\n        }\r\n        case 0: {\r\n            return [\r\n                ...extendedColumns,\r\n                ...columns\r\n            ]\r\n        }\r\n        default: {\r\n            return [\r\n                ...columns.slice(0, extendAfter),\r\n                ...extendedColumns,\r\n                ...columns.slice(extendAfter + 1)\r\n            ];\r\n        }\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}