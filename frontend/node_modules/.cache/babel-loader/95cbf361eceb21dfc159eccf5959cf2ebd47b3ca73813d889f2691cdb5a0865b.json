{"ast":null,"code":"var _class,\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { SpaceTaskService } from \"@entities/task\";\nexport class SpaceTaskRepository {}\n_class = SpaceTaskRepository;\nSpaceTaskRepository.keys = {\n  root: spaceId => [\"spaceTasks\", spaceId],\n  task: {\n    root: spaceId => [..._class.keys.root(spaceId), \"task\"],\n    id: (spaceId, taskId) => [..._class.keys.task.root(spaceId), taskId]\n  },\n  mutation: {\n    create: spaceId => [..._class.keys.root(spaceId), \"create\"],\n    delete: spaceId => [..._class.keys.root(spaceId), \"delete\"],\n    update: spaceId => [..._class.keys.root(spaceId), \"update\"]\n  }\n};\nSpaceTaskRepository.getList = _s((spaceId, params) => {\n  _s();\n  return useQuery({\n    queryKey: _class.keys.root(spaceId),\n    queryFn: async () => {\n      const response = await SpaceTaskService.getList(spaceId, params);\n      await new Promise(resolve => setTimeout(resolve, 500));\n      return response;\n    }\n  });\n}, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n  return [useQuery];\n});\nSpaceTaskRepository.updateTask = _s2((spaceId, queryClient) => {\n  _s2();\n  return useMutation({\n    mutationKey: _class.keys.mutation.update(spaceId),\n    mutationFn: async ({\n      taskId,\n      task\n    }) => {\n      const response = await SpaceTaskService.updateTask(spaceId, taskId, task);\n      return response;\n    },\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({\n        queryKey: _class.keys.root(spaceId)\n      });\n    }\n  });\n}, \"wwwtpB20p0aLiHIvSy5P98MwIUg=\", false, function () {\n  return [useMutation];\n});","map":{"version":3,"names":["useMutation","useQuery","SpaceTaskService","SpaceTaskRepository","_class","keys","root","spaceId","task","id","taskId","mutation","create","delete","update","getList","_s","params","queryKey","queryFn","response","Promise","resolve","setTimeout","updateTask","_s2","queryClient","mutationKey","mutationFn","onSuccess","invalidateQueries"],"sources":["D:/Mega/Planner/frontend/src/entities/task/space/repository.ts"],"sourcesContent":["import {QueryClient, useMutation, useQuery} from \"@tanstack/react-query\";\r\nimport {IPaginatorResponse} from \"@shared/api\";\r\nimport {IPersonalTask, ISpaceTask, PersonalTaskService, SpaceTaskService, UpdateTaskProps} from \"@entities/task\";\r\n\r\nexport class SpaceTaskRepository {\r\n    static keys = {\r\n        root: (spaceId: number) => [\"spaceTasks\", spaceId],\r\n        task: {\r\n            root: (spaceId: number) => [...SpaceTaskRepository.keys.root(spaceId), \"task\"],\r\n            id: (spaceId: number, taskId: number) => [...SpaceTaskRepository.keys.task.root(spaceId), taskId],\r\n        },\r\n\r\n        mutation: {\r\n            create: (spaceId: number) => [...SpaceTaskRepository.keys.root(spaceId), \"create\"],\r\n            delete: (spaceId: number) => [...SpaceTaskRepository.keys.root(spaceId), \"delete\"],\r\n            update: (spaceId: number) => [...SpaceTaskRepository.keys.root(spaceId), \"update\"],\r\n        }\r\n    }\r\n\r\n    static getList = (spaceId: number, params?: string) => useQuery <\r\n        IPaginatorResponse<ISpaceTask>,\r\n        Error\r\n    >({\r\n        queryKey: SpaceTaskRepository.keys.root(spaceId),\r\n        queryFn: async () => {\r\n            const response = await SpaceTaskService.getList(spaceId, params);\r\n\r\n            await new Promise(resolve => setTimeout(resolve, 500));\r\n\r\n            return response;\r\n        },\r\n    });\r\n\r\n    static updateTask = (spaceId: number, queryClient: QueryClient) => useMutation<\r\n        ISpaceTask,\r\n        Error,\r\n        UpdateTaskProps<ISpaceTask<number, number, number>>,\r\n        unknown\r\n        >({\r\n        mutationKey: SpaceTaskRepository.keys.mutation.update(spaceId),\r\n        mutationFn: async ({taskId, task}) => {\r\n            const response = await SpaceTaskService.updateTask(spaceId, taskId, task);\r\n\r\n            return response;\r\n        },\r\n        onSuccess: async () => {\r\n            await queryClient.invalidateQueries({\r\n                queryKey: SpaceTaskRepository.keys.root(spaceId)\r\n            });\r\n        },\r\n    });\r\n}"],"mappings":";;;AAAA,SAAqBA,WAAW,EAAEC,QAAQ,QAAO,uBAAuB;AAExE,SAAwDC,gBAAgB,QAAwB,gBAAgB;AAEhH,OAAO,MAAMC,mBAAmB,CAAC;AA+ChCC,MAAA,GA/CYD,mBAAmB;AAAnBA,mBAAmB,CACrBE,IAAI,GAAG;EACVC,IAAI,EAAGC,OAAe,IAAK,CAAC,YAAY,EAAEA,OAAO,CAAC;EAClDC,IAAI,EAAE;IACFF,IAAI,EAAGC,OAAe,IAAK,CAAC,GAAGJ,MAAmB,CAACE,IAAI,CAACC,IAAI,CAACC,OAAO,CAAC,EAAE,MAAM,CAAC;IAC9EE,EAAE,EAAEA,CAACF,OAAe,EAAEG,MAAc,KAAK,CAAC,GAAGP,MAAmB,CAACE,IAAI,CAACG,IAAI,CAACF,IAAI,CAACC,OAAO,CAAC,EAAEG,MAAM;EACpG,CAAC;EAEDC,QAAQ,EAAE;IACNC,MAAM,EAAGL,OAAe,IAAK,CAAC,GAAGJ,MAAmB,CAACE,IAAI,CAACC,IAAI,CAACC,OAAO,CAAC,EAAE,QAAQ,CAAC;IAClFM,MAAM,EAAGN,OAAe,IAAK,CAAC,GAAGJ,MAAmB,CAACE,IAAI,CAACC,IAAI,CAACC,OAAO,CAAC,EAAE,QAAQ,CAAC;IAClFO,MAAM,EAAGP,OAAe,IAAK,CAAC,GAAGJ,MAAmB,CAACE,IAAI,CAACC,IAAI,CAACC,OAAO,CAAC,EAAE,QAAQ;EACrF;AACJ,CAAC;AAbQJ,mBAAmB,CAerBY,OAAO,GAAAC,EAAA,CAAG,CAACT,OAAe,EAAEU,MAAe;EAAAD,EAAA;EAAA,OAAKf,QAAQ,CAG7D;IACEiB,QAAQ,EAAEf,MAAmB,CAACE,IAAI,CAACC,IAAI,CAACC,OAAO,CAAC;IAChDY,OAAO,EAAE,MAAAA,CAAA,KAAY;MACjB,MAAMC,QAAQ,GAAG,MAAMlB,gBAAgB,CAACa,OAAO,CAACR,OAAO,EAAEU,MAAM,CAAC;MAEhE,MAAM,IAAII,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,GAAG,CAAC,CAAC;MAEtD,OAAOF,QAAQ;IACnB;EACJ,CAAC,CAAC;AAAA;EAAA,QAZqDnB,QAAQ;AAAA;AAftDE,mBAAmB,CA6BrBqB,UAAU,GAAAC,GAAA,CAAG,CAAClB,OAAe,EAAEmB,WAAwB;EAAAD,GAAA;EAAA,OAAKzB,WAAW,CAKxE;IACF2B,WAAW,EAAExB,MAAmB,CAACE,IAAI,CAACM,QAAQ,CAACG,MAAM,CAACP,OAAO,CAAC;IAC9DqB,UAAU,EAAE,MAAAA,CAAO;MAAClB,MAAM;MAAEF;IAAI,CAAC,KAAK;MAClC,MAAMY,QAAQ,GAAG,MAAMlB,gBAAgB,CAACsB,UAAU,CAACjB,OAAO,EAAEG,MAAM,EAAEF,IAAI,CAAC;MAEzE,OAAOY,QAAQ;IACnB,CAAC;IACDS,SAAS,EAAE,MAAAA,CAAA,KAAY;MACnB,MAAMH,WAAW,CAACI,iBAAiB,CAAC;QAChCZ,QAAQ,EAAEf,MAAmB,CAACE,IAAI,CAACC,IAAI,CAACC,OAAO;MACnD,CAAC,CAAC;IACN;EACJ,CAAC,CAAC;AAAA;EAAA,QAjBiEP,WAAW;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}