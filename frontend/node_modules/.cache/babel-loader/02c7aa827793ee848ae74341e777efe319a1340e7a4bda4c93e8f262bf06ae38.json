{"ast":null,"code":"var _jsxFileName = \"D:\\\\Mega\\\\Planner\\\\frontend\\\\src\\\\widgets\\\\settings_form\\\\ui\\\\SettingsForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useForm, useFormTextField } from \"@shared/hooks\";\nimport { AuthValidator, CommonValidator } from \"@shared/lib\";\nimport { UserService, userStore } from \"@entities/user\";\nimport { Form, FormColorPicker, FormImage, FormInput, FormLabel, FormReference, FormSubmit } from \"@shared/ui\";\nimport { ROUTER_URL } from \"@shared/config\";\nimport { useFormImageField } from \"@shared/hooks/form/use-form-image-field\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst validators = [CommonValidator.required(), CommonValidator.specialChars()];\nexport const SettingsForm = () => {\n  _s();\n  const profile = userStore.useProfile();\n  const username = useFormTextField(\"username\", validators, profile.user.username);\n  const firstName = useFormTextField(\"first_name\", [...validators, AuthValidator.realName()], profile.user.first_name);\n  const lastName = useFormTextField(\"last_name\", [...validators, AuthValidator.realName()], profile.user.last_name);\n  const email = useFormTextField(\"email\", validators, profile.user.email);\n  const [color, setColor] = useState(profile.color);\n  const avatar = useFormImageField(\"avatar\", []);\n  const form = useForm({\n    fields: [username, firstName, lastName],\n    apiCall: async () => await userStore.update({\n      username: username.value,\n      first_name: firstName.value,\n      last_name: lastName.value,\n      email: email.value,\n      color: color.toUpperCase(),\n      avatar: avatar.value || undefined\n    }),\n    defaultError: {},\n    defaultSuccessMessage: \"Данные успешно изменены!\"\n  });\n  const onTelegram = async () => {\n    const response = await UserService.getTelegram();\n    window.location.href = response.url_telegram;\n  };\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: form.handleFormSubmit,\n    center: true,\n    wide: true,\n    children: [/*#__PURE__*/_jsxDEV(FormInput, {\n      type: \"text\",\n      placeholder: \"Введите имя...\",\n      mask: \"\",\n      header: \"Имя\",\n      onChange: firstName.handleChange,\n      error: firstName.error,\n      defaultValue: firstName.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n      type: \"text\",\n      placeholder: \"Введите логин...\",\n      mask: \"\",\n      header: \"Логин\",\n      onChange: username.handleChange,\n      error: username.error,\n      defaultValue: username.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n      type: \"text\",\n      placeholder: \"Введите фамилию...\",\n      mask: \"\",\n      header: \"Фамилия\",\n      onChange: lastName.handleChange,\n      error: lastName.error,\n      defaultValue: lastName.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormInput, {\n      type: \"text\",\n      placeholder: \"Введите почту...\",\n      mask: \"\",\n      header: \"Электронная почта\",\n      onChange: email.handleChange,\n      error: email.error,\n      defaultValue: email.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormImage, {\n      header: \"Загрузите аватар\",\n      src: avatar.value || \"http://localhost:7000\" + profile.avatar,\n      onChange: avatar.handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormColorPicker, {\n      defaultColor: color,\n      header: \"Цвет профиля\",\n      onChange: e => setColor(e.hex)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormReference, {\n      to: \"\",\n      onClick: onTelegram,\n      children: \"\\u041F\\u0440\\u0438\\u0432\\u044F\\u0437\\u0430\\u0442\\u044C \\u0442\\u0435\\u043B\\u0435\\u0433\\u0440\\u0430\\u043C\\u043C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), !!form.successMessage.length && /*#__PURE__*/_jsxDEV(FormLabel, {\n      success: true,\n      children: form.successMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(FormSubmit, {\n      children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormReference, {\n      to: ROUTER_URL.CHANGE_PASSWORD,\n      children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n};\n_s(SettingsForm, \"opJhloDc5XcTn2cCt6u35Nz3p+w=\", false, function () {\n  return [userStore.useProfile, useFormTextField, useFormTextField, useFormTextField, useFormTextField, useFormImageField, useForm];\n});\n_c = SettingsForm;\nvar _c;\n$RefreshReg$(_c, \"SettingsForm\");","map":{"version":3,"names":["React","useState","useForm","useFormTextField","AuthValidator","CommonValidator","UserService","userStore","Form","FormColorPicker","FormImage","FormInput","FormLabel","FormReference","FormSubmit","ROUTER_URL","useFormImageField","jsxDEV","_jsxDEV","validators","required","specialChars","SettingsForm","_s","profile","useProfile","username","user","firstName","realName","first_name","lastName","last_name","email","color","setColor","avatar","form","fields","apiCall","update","value","toUpperCase","undefined","defaultError","defaultSuccessMessage","onTelegram","response","getTelegram","window","location","href","url_telegram","onSubmit","handleFormSubmit","center","wide","children","type","placeholder","mask","header","onChange","handleChange","error","defaultValue","fileName","_jsxFileName","lineNumber","columnNumber","src","defaultColor","e","hex","to","onClick","successMessage","length","success","CHANGE_PASSWORD","_c","$RefreshReg$"],"sources":["D:/Mega/Planner/frontend/src/widgets/settings_form/ui/SettingsForm.tsx"],"sourcesContent":["import React, {useState} from 'react';\r\nimport {useForm, useFormTextField} from \"@shared/hooks\";\r\nimport {AuthValidator, CommonValidator} from \"@shared/lib\";\r\nimport {TextField} from \"@shared/types\";\r\nimport {ResponseErrorData} from \"@shared/api\";\r\nimport {UserService, userStore} from \"@entities/user\";\r\nimport {Form, FormColorPicker, FormImage, FormInput, FormLabel, FormReference, FormSubmit} from \"@shared/ui\";\r\nimport {ROUTER_URL} from \"@shared/config\";\r\nimport {useFormImageField} from \"@shared/hooks/form/use-form-image-field\";\r\n\r\nconst validators = [\r\n    CommonValidator.required(),\r\n    CommonValidator.specialChars()\r\n];\r\n\r\nexport const SettingsForm = () => {\r\n    const profile = userStore.useProfile()!;\r\n\r\n    const username = useFormTextField(\"username\", validators, profile.user.username);\r\n    const firstName = useFormTextField(\"first_name\", [\r\n        ...validators,\r\n        AuthValidator.realName()\r\n    ], profile.user.first_name);\r\n    const lastName = useFormTextField(\"last_name\", [\r\n        ...validators,\r\n        AuthValidator.realName()\r\n    ], profile.user.last_name);\r\n    const email = useFormTextField(\"email\", validators, profile.user.email);\r\n    const [color, setColor] = useState(profile.color);\r\n    const avatar = useFormImageField(\"avatar\", []);\r\n\r\n    const form = useForm<TextField, void, ResponseErrorData>({\r\n        fields: [username, firstName, lastName],\r\n        apiCall: async () => await userStore.update({\r\n            username: username.value,\r\n            first_name: firstName.value,\r\n            last_name: lastName.value,\r\n            email: email.value,\r\n            color: color.toUpperCase(),\r\n            avatar: avatar.value || undefined,\r\n        }),\r\n        defaultError: {},\r\n        defaultSuccessMessage: \"Данные успешно изменены!\"\r\n    });\r\n\r\n    const onTelegram = async () => {\r\n        const response = await UserService.getTelegram();\r\n\r\n        window.location.href = response.url_telegram;\r\n    };\r\n\r\n    return (\r\n        <Form onSubmit={form.handleFormSubmit} center wide>\r\n            <FormInput type={\"text\"} placeholder={\"Введите имя...\"} mask={\"\"}\r\n                       header={\"Имя\"}\r\n                       onChange={firstName.handleChange}\r\n                       error={firstName.error}\r\n                       defaultValue={firstName.value}\r\n            />\r\n            <FormInput type={\"text\"} placeholder={\"Введите логин...\"} mask={\"\"}\r\n                       header={\"Логин\"}\r\n                       onChange={username.handleChange}\r\n                       error={username.error}\r\n                       defaultValue={username.value}\r\n            />\r\n            <FormInput type={\"text\"} placeholder={\"Введите фамилию...\"} mask={\"\"}\r\n                       header={\"Фамилия\"}\r\n                       onChange={lastName.handleChange}\r\n                       error={lastName.error}\r\n                       defaultValue={lastName.value}\r\n            />\r\n            <FormInput type={\"text\"} placeholder={\"Введите почту...\"} mask={\"\"}\r\n                       header={\"Электронная почта\"}\r\n                       onChange={email.handleChange}\r\n                       error={email.error}\r\n                       defaultValue={email.value}\r\n            />\r\n\r\n            <FormImage\r\n                header={\"Загрузите аватар\"}\r\n                src={avatar.value || \"http://localhost:7000\" + profile.avatar}\r\n                onChange={avatar.handleChange}\r\n            />\r\n\r\n            <FormColorPicker\r\n                defaultColor={color}\r\n                header={\"Цвет профиля\"}\r\n                onChange={(e) => setColor(e.hex)}\r\n            />\r\n\r\n            <FormReference to={\"\"} onClick={onTelegram}>Привязать телеграмм</FormReference>\r\n\r\n            {\r\n                !!form.successMessage.length && (\r\n                    <FormLabel success>{form.successMessage}</FormLabel>\r\n                )\r\n            }\r\n\r\n            <FormSubmit>Изменить</FormSubmit>\r\n            <FormReference to={ROUTER_URL.CHANGE_PASSWORD}>Изменить пароль</FormReference>\r\n        </Form>\r\n    );\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}