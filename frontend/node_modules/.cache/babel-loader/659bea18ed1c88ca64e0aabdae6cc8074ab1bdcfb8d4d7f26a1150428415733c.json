{"ast":null,"code":"import { AuthService } from \"./api\";\nimport Cookies from \"js-cookie\";\nimport { sessionStore } from \"@entities/session\";\nimport { ResponseErrorHandler } from \"@shared/api\";\nexport class AuthRepository {}\nAuthRepository.login = async params => {\n  try {\n    await AuthService.login(params);\n    const session = Cookies.get(\"sessionid\");\n    sessionStore.setUser(session);\n  } catch (error) {\n    throw new Error(\"Неверный логин или пароль\");\n  }\n};\nAuthRepository.registration = async params => {\n  try {\n    const response = await AuthService.registration(params);\n  } catch (error) {\n    throw new ResponseErrorHandler(error);\n  }\n};\nAuthRepository.logout = async () => {\n  try {\n    await AuthService.logout();\n    sessionStore.removeUser();\n  } catch (error) {}\n};\nAuthRepository.recoveryPassword = async params => {\n  try {\n    await AuthService.recoveryPassword(params);\n    return \"На почту отправлено письмо для восстановления\";\n  } catch (error) {\n    throw new Error(\"Пользователь с такой почтой не найден\");\n  }\n};\nAuthRepository.recoveryPasswordConfirm = async params => {\n  try {\n    await AuthService.recoveryPasswordConfirm(params);\n    const session = Cookies.get(\"sessionid\");\n    sessionStore.setUser(session);\n    console.log(\"session\", Cookies.get(\"sessionid\"));\n  } catch (error) {\n    console.log(\"error\", error);\n    throw new Error(\"Произошла ошибка!\");\n  }\n};","map":{"version":3,"names":["AuthService","Cookies","sessionStore","ResponseErrorHandler","AuthRepository","login","params","session","get","setUser","error","Error","registration","response","logout","removeUser","recoveryPassword","recoveryPasswordConfirm","console","log"],"sources":["D:/Mega/Planner/frontend/src/entities/session/auth/repository.ts"],"sourcesContent":["import {\r\n    AuthService,\r\n    ILoginParams,\r\n    IRecoveryPasswordConfirmParams,\r\n    IRecoveryPasswordParams,\r\n    IRegistrationParams\r\n} from \"./api\";\r\nimport Cookies from \"js-cookie\";\r\nimport {sessionStore} from \"@entities/session\";\r\nimport {ResponseErrorHandler, ResponseErrorData} from \"@shared/api\";\r\n\r\nexport class AuthRepository {\r\n    static login = async (params: ILoginParams) => {\r\n        try {\r\n            await AuthService.login(params);\r\n            const session = Cookies.get(\"sessionid\")!;\r\n            sessionStore.setUser(session);\r\n        }\r\n        catch (error) {\r\n            throw new Error(\"Неверный логин или пароль\");\r\n        }\r\n    };\r\n\r\n    static registration = async (params: IRegistrationParams) => {\r\n        try {\r\n            const response = await AuthService.registration(params);\r\n        }\r\n        catch (error) {\r\n            throw new ResponseErrorHandler(error as ResponseErrorData);\r\n        }\r\n    };\r\n\r\n    static logout = async () => {\r\n        try {\r\n            await AuthService.logout();\r\n            sessionStore.removeUser();\r\n        }\r\n        catch (error) {\r\n\r\n        }\r\n    };\r\n\r\n    static recoveryPassword = async (params: IRecoveryPasswordParams) => {\r\n        try {\r\n            await AuthService.recoveryPassword(params);\r\n\r\n            return \"На почту отправлено письмо для восстановления\";\r\n        }\r\n        catch (error) {\r\n            throw new Error(\"Пользователь с такой почтой не найден\");\r\n        }\r\n    };\r\n\r\n    static recoveryPasswordConfirm = async (params: IRecoveryPasswordConfirmParams) => {\r\n        try {\r\n            await AuthService.recoveryPasswordConfirm(params);\r\n            const session = Cookies.get(\"sessionid\")!;\r\n            sessionStore.setUser(session);\r\n            console.log(\"session\", Cookies.get(\"sessionid\"));\r\n        }\r\n        catch (error) {\r\n            console.log(\"error\", error);\r\n            throw new Error(\"Произошла ошибка!\");\r\n        }\r\n    };\r\n}"],"mappings":"AAAA,SACIA,WAAW,QAKR,OAAO;AACd,OAAOC,OAAO,MAAM,WAAW;AAC/B,SAAQC,YAAY,QAAO,mBAAmB;AAC9C,SAAQC,oBAAoB,QAA0B,aAAa;AAEnE,OAAO,MAAMC,cAAc,CAAC;AAAfA,cAAc,CAChBC,KAAK,GAAG,MAAOC,MAAoB,IAAK;EAC3C,IAAI;IACA,MAAMN,WAAW,CAACK,KAAK,CAACC,MAAM,CAAC;IAC/B,MAAMC,OAAO,GAAGN,OAAO,CAACO,GAAG,CAAC,WAAW,CAAE;IACzCN,YAAY,CAACO,OAAO,CAACF,OAAO,CAAC;EACjC,CAAC,CACD,OAAOG,KAAK,EAAE;IACV,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;EAChD;AACJ,CAAC;AAVQP,cAAc,CAYhBQ,YAAY,GAAG,MAAON,MAA2B,IAAK;EACzD,IAAI;IACA,MAAMO,QAAQ,GAAG,MAAMb,WAAW,CAACY,YAAY,CAACN,MAAM,CAAC;EAC3D,CAAC,CACD,OAAOI,KAAK,EAAE;IACV,MAAM,IAAIP,oBAAoB,CAACO,KAA0B,CAAC;EAC9D;AACJ,CAAC;AAnBQN,cAAc,CAqBhBU,MAAM,GAAG,YAAY;EACxB,IAAI;IACA,MAAMd,WAAW,CAACc,MAAM,CAAC,CAAC;IAC1BZ,YAAY,CAACa,UAAU,CAAC,CAAC;EAC7B,CAAC,CACD,OAAOL,KAAK,EAAE,CAEd;AACJ,CAAC;AA7BQN,cAAc,CA+BhBY,gBAAgB,GAAG,MAAOV,MAA+B,IAAK;EACjE,IAAI;IACA,MAAMN,WAAW,CAACgB,gBAAgB,CAACV,MAAM,CAAC;IAE1C,OAAO,+CAA+C;EAC1D,CAAC,CACD,OAAOI,KAAK,EAAE;IACV,MAAM,IAAIC,KAAK,CAAC,uCAAuC,CAAC;EAC5D;AACJ,CAAC;AAxCQP,cAAc,CA0ChBa,uBAAuB,GAAG,MAAOX,MAAsC,IAAK;EAC/E,IAAI;IACA,MAAMN,WAAW,CAACiB,uBAAuB,CAACX,MAAM,CAAC;IACjD,MAAMC,OAAO,GAAGN,OAAO,CAACO,GAAG,CAAC,WAAW,CAAE;IACzCN,YAAY,CAACO,OAAO,CAACF,OAAO,CAAC;IAC7BW,OAAO,CAACC,GAAG,CAAC,SAAS,EAAElB,OAAO,CAACO,GAAG,CAAC,WAAW,CAAC,CAAC;EACpD,CAAC,CACD,OAAOE,KAAK,EAAE;IACVQ,OAAO,CAACC,GAAG,CAAC,OAAO,EAAET,KAAK,CAAC;IAC3B,MAAM,IAAIC,KAAK,CAAC,mBAAmB,CAAC;EACxC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}