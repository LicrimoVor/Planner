{"ast":null,"code":"var _s = $RefreshSig$();\nimport { CommonValidator } from \"@shared/lib\";\nimport { useCallback, useState } from \"react\";\nexport function useFormImageField(id, validators, init = null) {\n  _s();\n  const [value, setValue] = useState(init);\n  const [error, setError] = useState(null);\n  const handleChange = useCallback(async e => {\n    var _e$target$files;\n    const file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files.item(0);\n    if (!file) {\n      return;\n    }\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = async () => {\n      setValue(reader.result);\n      setError(await CommonValidator.validate(file, validators));\n    };\n  }, [validators]);\n  const hasError = useCallback(async () => {\n    // const error = value ? await CommonValidator.validate(validators) : null;\n    const error = null;\n    setError(error);\n    return !!error;\n  }, []);\n  return {\n    id,\n    value,\n    error,\n    hasError,\n    handleChange\n  };\n}\n_s(useFormImageField, \"bKJ8qKiN0UHRESijUUghYlpEW58=\");\n;","map":{"version":3,"names":["CommonValidator","useCallback","useState","useFormImageField","id","validators","init","_s","value","setValue","error","setError","handleChange","e","_e$target$files","file","target","files","item","reader","FileReader","readAsDataURL","onload","result","validate","hasError"],"sources":["D:/Mega/Planner/frontend/src/shared/hooks/form/use-form-image-field.ts"],"sourcesContent":["import {CommonValidator, ValidationResult, Validator} from \"@shared/lib\";\r\nimport {ImageField} from \"@shared/types\";\r\nimport {ChangeEvent, useCallback, useState} from \"react\";\r\n\r\nexport function useFormImageField(\r\n    id: string,\r\n    validators: Validator<File>[],\r\n    init: string | null = null\r\n): ImageField {\r\n    const [value, setValue] = useState<string | null>(init);\r\n    const [error, setError] = useState<ValidationResult>(null);\r\n\r\n    const handleChange = useCallback(\r\n        async (e: ChangeEvent<HTMLInputElement>) => {\r\n            const file = e.target.files?.item(0);\r\n            if(!file) {\r\n                return;\r\n            }\r\n\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = async () => {\r\n                setValue(reader.result as string);\r\n                setError(await CommonValidator.validate(file, validators));\r\n            }\r\n        },\r\n        [validators]\r\n    );\r\n\r\n    const hasError = useCallback(\r\n        async () => {\r\n            // const error = value ? await CommonValidator.validate(validators) : null;\r\n            const error = null;\r\n            setError(error);\r\n\r\n            return !!error;\r\n        },\r\n        []\r\n    );\r\n\r\n    return {\r\n        id,\r\n        value,\r\n        error,\r\n        hasError,\r\n        handleChange,\r\n    };\r\n};"],"mappings":";AAAA,SAAQA,eAAe,QAAoC,aAAa;AAExE,SAAqBC,WAAW,EAAEC,QAAQ,QAAO,OAAO;AAExD,OAAO,SAASC,iBAAiBA,CAC7BC,EAAU,EACVC,UAA6B,EAC7BC,IAAmB,GAAG,IAAI,EAChB;EAAAC,EAAA;EACV,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAgBI,IAAI,CAAC;EACvD,MAAM,CAACI,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAmB,IAAI,CAAC;EAE1D,MAAMU,YAAY,GAAGX,WAAW,CAC5B,MAAOY,CAAgC,IAAK;IAAA,IAAAC,eAAA;IACxC,MAAMC,IAAI,IAAAD,eAAA,GAAGD,CAAC,CAACG,MAAM,CAACC,KAAK,cAAAH,eAAA,uBAAdA,eAAA,CAAgBI,IAAI,CAAC,CAAC,CAAC;IACpC,IAAG,CAACH,IAAI,EAAE;MACN;IACJ;IAEA,MAAMI,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;IAC/BD,MAAM,CAACE,aAAa,CAACN,IAAI,CAAC;IAC1BI,MAAM,CAACG,MAAM,GAAG,YAAY;MACxBb,QAAQ,CAACU,MAAM,CAACI,MAAgB,CAAC;MACjCZ,QAAQ,CAAC,MAAMX,eAAe,CAACwB,QAAQ,CAACT,IAAI,EAAEV,UAAU,CAAC,CAAC;IAC9D,CAAC;EACL,CAAC,EACD,CAACA,UAAU,CACf,CAAC;EAED,MAAMoB,QAAQ,GAAGxB,WAAW,CACxB,YAAY;IACR;IACA,MAAMS,KAAK,GAAG,IAAI;IAClBC,QAAQ,CAACD,KAAK,CAAC;IAEf,OAAO,CAAC,CAACA,KAAK;EAClB,CAAC,EACD,EACJ,CAAC;EAED,OAAO;IACHN,EAAE;IACFI,KAAK;IACLE,KAAK;IACLe,QAAQ;IACRb;EACJ,CAAC;AACL;AAACL,EAAA,CA3CeJ,iBAAiB;AA2ChC"},"metadata":{},"sourceType":"module","externalDependencies":[]}