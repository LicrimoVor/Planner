{"ast":null,"code":"export class CommonValidator {\n  static async validate(value, validators) {\n    let validationResult = null;\n    let i = 0;\n    while (validationResult === null && i < validators.length) {\n      const result = await validators[i](value);\n      result && (validationResult = result);\n      i++;\n    }\n    return validationResult;\n  }\n}\nCommonValidator.required = (message = \"Поле обязательно\") => {\n  return async value => value ? null : message;\n};\nCommonValidator.specialChars = (message = \"Содержатся недопустимые символы\") => {\n  const regex = /[\\\\]|(<(?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])+>)/;\n  return async value => regex.test(value) ? message : null;\n};\nCommonValidator.maxLength = (maxLength = 255) => {\n  return async value => value.length > maxLength ? `Не должно быть больше ${maxLength} символов` : null;\n};\nCommonValidator.isEqualTo = options => {\n  return async value => !(options !== null && options !== void 0 && options.reverse) && value === (options === null || options === void 0 ? void 0 : options.equalTo) || options !== null && options !== void 0 && options.reverse && value !== (options === null || options === void 0 ? void 0 : options.equalTo) ? null : (options === null || options === void 0 ? void 0 : options.message) || (!(options !== null && options !== void 0 && options.reverse) ? \"Поля должны совпадать\" : \"Поля не должны совпадать\");\n};","map":{"version":3,"names":["CommonValidator","validate","value","validators","validationResult","i","length","result","required","message","specialChars","regex","test","maxLength","isEqualTo","options","reverse","equalTo"],"sources":["D:/Mega/Planner/frontend/src/shared/lib/validator/base.ts"],"sourcesContent":["import {Validator, ValidationResult, GetValidator} from \"./models\";\r\n\r\nexport class CommonValidator {\r\n    static async validate<T>(\r\n        value: T,\r\n        validators: Validator<T>[]\r\n    ): Promise<ValidationResult> {\r\n        let validationResult: ValidationResult = null;\r\n        let i = 0;\r\n\r\n        while(validationResult === null && i < validators.length) {\r\n            const result = await validators[i](value);\r\n\r\n            result && (validationResult = result);\r\n            i++;\r\n        }\r\n\r\n        return validationResult;\r\n    }\r\n\r\n    static required: GetValidator<string, string> = (\r\n        message = \"Поле обязательно\"\r\n    ) => {\r\n        return async (value) => (value ? null : message);\r\n    }\r\n\r\n    static specialChars: GetValidator<string, string> = (\r\n        message = \"Содержатся недопустимые символы\"\r\n    ) => {\r\n        const regex = /[\\\\]|(<(?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])+>)/;\r\n        return async (value) => (\r\n            regex.test(value) ? message : null\r\n        );\r\n    }\r\n\r\n    static maxLength: GetValidator<number, string> = (\r\n        maxLength = 255\r\n    ) => {\r\n        return async (value) => (\r\n            value.length > maxLength ? `Не должно быть больше ${maxLength} символов` : null\r\n        );\r\n    }\r\n\r\n    static isEqualTo:\r\n        GetValidator<{\r\n            equalTo: string;\r\n            message: string;\r\n            reverse?: boolean;\r\n        }, string> = (options) => {\r\n        return async (value) => (\r\n            ((!options?.reverse && value === options?.equalTo) ||\r\n            (options?.reverse && value !== options?.equalTo)\r\n            ) ? null : (options?.message || (!options?.reverse ? \"Поля должны совпадать\" : \"Поля не должны совпадать\"))\r\n        );\r\n    }\r\n}"],"mappings":"AAEA,OAAO,MAAMA,eAAe,CAAC;EACzB,aAAaC,QAAQA,CACjBC,KAAQ,EACRC,UAA0B,EACD;IACzB,IAAIC,gBAAkC,GAAG,IAAI;IAC7C,IAAIC,CAAC,GAAG,CAAC;IAET,OAAMD,gBAAgB,KAAK,IAAI,IAAIC,CAAC,GAAGF,UAAU,CAACG,MAAM,EAAE;MACtD,MAAMC,MAAM,GAAG,MAAMJ,UAAU,CAACE,CAAC,CAAC,CAACH,KAAK,CAAC;MAEzCK,MAAM,KAAKH,gBAAgB,GAAGG,MAAM,CAAC;MACrCF,CAAC,EAAE;IACP;IAEA,OAAOD,gBAAgB;EAC3B;AAqCJ;AArDaJ,eAAe,CAkBjBQ,QAAQ,GAAiC,CAC5CC,OAAO,GAAG,kBAAkB,KAC3B;EACD,OAAO,MAAOP,KAAK,IAAMA,KAAK,GAAG,IAAI,GAAGO,OAAQ;AACpD,CAAC;AAtBQT,eAAe,CAwBjBU,YAAY,GAAiC,CAChDD,OAAO,GAAG,iCAAiC,KAC1C;EACD,MAAME,KAAK,GAAG,gDAAgD;EAC9D,OAAO,MAAOT,KAAK,IACfS,KAAK,CAACC,IAAI,CAACV,KAAK,CAAC,GAAGO,OAAO,GAAG,IACjC;AACL,CAAC;AA/BQT,eAAe,CAiCjBa,SAAS,GAAiC,CAC7CA,SAAS,GAAG,GAAG,KACd;EACD,OAAO,MAAOX,KAAK,IACfA,KAAK,CAACI,MAAM,GAAGO,SAAS,GAAI,yBAAwBA,SAAU,WAAU,GAAG,IAC9E;AACL,CAAC;AAvCQb,eAAe,CAyCjBc,SAAS,GAKEC,OAAO,IAAK;EAC1B,OAAO,MAAOb,KAAK,IACb,EAACa,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEC,OAAO,KAAId,KAAK,MAAKa,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,OAAO,KAChDF,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEC,OAAO,IAAId,KAAK,MAAKa,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,OAAO,CAAC,GAC5C,IAAI,GAAI,CAAAF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEN,OAAO,MAAK,EAACM,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEC,OAAO,IAAG,uBAAuB,GAAG,0BAA0B,CAC5G;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}