{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { API_META } from \"@shared/api\";\nimport { create } from \"zustand\";\nimport { UserService } from \"@entities/user/api\";\nconst useUserStore = create((set, get) => ({\n  meta: API_META.INITIAL,\n  user: {},\n  getMe: async () => {\n    if (get().meta === API_META.LOADING) {\n      return;\n    }\n    set({\n      meta: API_META.LOADING\n    });\n    try {\n      const response = await UserService.getMe();\n      set({\n        user: response,\n        meta: API_META.SUCCESS\n      });\n    } catch (error) {\n      set({\n        meta: API_META.ERROR\n      });\n      throw error;\n    }\n  },\n  getAll: async () => {\n    if (get().meta === API_META.LOADING) {\n      throw new Error();\n    }\n    set({\n      meta: API_META.LOADING\n    });\n    try {\n      const response = await UserService.getAll();\n      set({\n        meta: API_META.SUCCESS\n      });\n      return response;\n    } catch (error) {\n      set({\n        meta: API_META.ERROR\n      });\n      throw new Error();\n    }\n  }\n}));\nexport class UserStore {}\nUserStore.useMeta = _s(() => {\n  _s();\n  return useUserStore(state => state.meta);\n}, \"LBLZHC2IBpMt1E+fTiwVXX/Gvb4=\", false, function () {\n  return [useUserStore];\n});\nUserStore.useUser = _s2(() => {\n  _s2();\n  return useUserStore(state => state.user);\n}, \"LBLZHC2IBpMt1E+fTiwVXX/Gvb4=\", false, function () {\n  return [useUserStore];\n});\nUserStore.getMe = useUserStore.getState().getMe;\nUserStore.getAll = useUserStore.getState().getAll;","map":{"version":3,"names":["API_META","create","UserService","useUserStore","set","get","meta","INITIAL","user","getMe","LOADING","response","SUCCESS","error","ERROR","getAll","Error","UserStore","useMeta","_s","state","useUser","_s2","getState"],"sources":["D:/Mega/Planner/frontend/src/entities/user/store.ts"],"sourcesContent":["import {IUser} from \"@entities/user/api/models\";\r\nimport {API_META, IPaginatorResponse} from \"@shared/api\";\r\nimport {create} from \"zustand\";\r\nimport {UserService} from \"@entities/user/api\";\r\n\r\ninterface UserState {\r\n    meta: API_META;\r\n    user: IUser;\r\n\r\n    getMe: () => Promise<void>;\r\n    getAll: () => any;\r\n}\r\n\r\nconst useUserStore = create<UserState>((set, get) => ({\r\n    meta: API_META.INITIAL,\r\n    user: {},\r\n\r\n    getMe: async () => {\r\n        if(get().meta === API_META.LOADING) {\r\n            return;\r\n        }\r\n\r\n        set({meta: API_META.LOADING});\r\n\r\n        try {\r\n            const response = await UserService.getMe();\r\n            set({user: response, meta: API_META.SUCCESS});\r\n        }\r\n        catch (error) {\r\n            set({meta: API_META.ERROR});\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    getAll: async () => {\r\n        if(get().meta === API_META.LOADING) {\r\n            throw new Error();\r\n        }\r\n\r\n        set({meta: API_META.LOADING});\r\n\r\n        try {\r\n            const response = await UserService.getAll();\r\n            set({meta: API_META.SUCCESS});\r\n            return response;\r\n        }\r\n        catch (error) {\r\n            set({meta: API_META.ERROR});\r\n            throw new Error();\r\n        }\r\n    }\r\n}));\r\n\r\nexport class UserStore {\r\n    static useMeta = () => useUserStore(state => state.meta);\r\n    static useUser = () => useUserStore(state => state.user);\r\n\r\n    static getMe = useUserStore.getState().getMe;\r\n    static getAll = useUserStore.getState().getAll;\r\n}"],"mappings":";;AACA,SAAQA,QAAQ,QAA2B,aAAa;AACxD,SAAQC,MAAM,QAAO,SAAS;AAC9B,SAAQC,WAAW,QAAO,oBAAoB;AAU9C,MAAMC,YAAY,GAAGF,MAAM,CAAY,CAACG,GAAG,EAAEC,GAAG,MAAM;EAClDC,IAAI,EAAEN,QAAQ,CAACO,OAAO;EACtBC,IAAI,EAAE,CAAC,CAAC;EAERC,KAAK,EAAE,MAAAA,CAAA,KAAY;IACf,IAAGJ,GAAG,CAAC,CAAC,CAACC,IAAI,KAAKN,QAAQ,CAACU,OAAO,EAAE;MAChC;IACJ;IAEAN,GAAG,CAAC;MAACE,IAAI,EAAEN,QAAQ,CAACU;IAAO,CAAC,CAAC;IAE7B,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMT,WAAW,CAACO,KAAK,CAAC,CAAC;MAC1CL,GAAG,CAAC;QAACI,IAAI,EAAEG,QAAQ;QAAEL,IAAI,EAAEN,QAAQ,CAACY;MAAO,CAAC,CAAC;IACjD,CAAC,CACD,OAAOC,KAAK,EAAE;MACVT,GAAG,CAAC;QAACE,IAAI,EAAEN,QAAQ,CAACc;MAAK,CAAC,CAAC;MAC3B,MAAMD,KAAK;IACf;EACJ,CAAC;EAEDE,MAAM,EAAE,MAAAA,CAAA,KAAY;IAChB,IAAGV,GAAG,CAAC,CAAC,CAACC,IAAI,KAAKN,QAAQ,CAACU,OAAO,EAAE;MAChC,MAAM,IAAIM,KAAK,CAAC,CAAC;IACrB;IAEAZ,GAAG,CAAC;MAACE,IAAI,EAAEN,QAAQ,CAACU;IAAO,CAAC,CAAC;IAE7B,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMT,WAAW,CAACa,MAAM,CAAC,CAAC;MAC3CX,GAAG,CAAC;QAACE,IAAI,EAAEN,QAAQ,CAACY;MAAO,CAAC,CAAC;MAC7B,OAAOD,QAAQ;IACnB,CAAC,CACD,OAAOE,KAAK,EAAE;MACVT,GAAG,CAAC;QAACE,IAAI,EAAEN,QAAQ,CAACc;MAAK,CAAC,CAAC;MAC3B,MAAM,IAAIE,KAAK,CAAC,CAAC;IACrB;EACJ;AACJ,CAAC,CAAC,CAAC;AAEH,OAAO,MAAMC,SAAS,CAAC;AAAVA,SAAS,CACXC,OAAO,GAAAC,EAAA,CAAG;EAAAA,EAAA;EAAA,OAAMhB,YAAY,CAACiB,KAAK,IAAIA,KAAK,CAACd,IAAI,CAAC;AAAA;EAAA,QAAjCH,YAAY;AAAA;AAD1Bc,SAAS,CAEXI,OAAO,GAAAC,GAAA,CAAG;EAAAA,GAAA;EAAA,OAAMnB,YAAY,CAACiB,KAAK,IAAIA,KAAK,CAACZ,IAAI,CAAC;AAAA;EAAA,QAAjCL,YAAY;AAAA;AAF1Bc,SAAS,CAIXR,KAAK,GAAGN,YAAY,CAACoB,QAAQ,CAAC,CAAC,CAACd,KAAK;AAJnCQ,SAAS,CAKXF,MAAM,GAAGZ,YAAY,CAACoB,QAAQ,CAAC,CAAC,CAACR,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}