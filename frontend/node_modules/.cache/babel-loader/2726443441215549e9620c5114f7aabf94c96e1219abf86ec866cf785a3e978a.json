{"ast":null,"code":"export {};\n// import {create} from \"zustand\";\n// import {API_META} from \"@shared/api\";\n// import {AuthService, ILoginParams, UserService, UserStore} from \"@entities/user\";\n// import Cookies from \"js-cookie\";\n// import {useQuery, UseQueryResult} from \"@tanstack/react-query\";\n// import {persist} from \"zustand/middleware\";\n//\n// interface AuthState {\n//     meta: API_META;\n//     //\n//     login: (params: ILoginParams) => Promise<void>;\n//     logout: () => Promise<void>;\n//     check: () => Promise<void>;\n// }\n//\n// const useAuthStore = create<AuthState>(\n//         (set, get) => ({\n//             meta: API_META.INITIAL,\n//             isAuth: false,\n//\n//             session: null,\n//\n//             login: async (params) => {\n//                 if(get().meta === API_META.LOADING) {\n//                     return;\n//                 }\n//\n//                 set({meta: API_META.LOADING});\n//\n//                 try {\n//                     await AuthService.login(params);\n//                     const session = Cookies.get(\"sessionid\");\n//                     set({session: session});\n//                     set({isAuth: true, meta: API_META.SUCCESS});\n//                 }\n//                 catch (error) {\n//                     set({meta: API_META.ERROR});\n//                     throw new Error(\"Неверный логин или пароль\");\n//                 }\n//             },\n//\n//             logout: async () => {\n//                 if(get().meta === API_META.LOADING) {\n//                     return;\n//                 }\n//\n//                 set({meta: API_META.LOADING});\n//\n//                 try {\n//                     await AuthService.logout();\n//                     set({session: null});\n//                     set({isAuth: false, meta: API_META.SUCCESS});\n//                 }\n//                 catch (error) {\n//                     set({meta: API_META.ERROR});\n//                 }\n//             },\n//\n//             check: async () => {\n//                 if(get().meta === API_META.LOADING) {\n//                     return;\n//                 }\n//\n//                 set({meta: API_META.LOADING});\n//\n//                 if(!Cookies.get(\"sessionid\")) {\n//                     set({isAuth: false, meta: API_META.ERROR});\n//                     return;\n//                 }\n//\n//                 try {\n//                     await UserStore.getMe();\n//                     set({isAuth: true, meta: API_META.SUCCESS});\n//                 }\n//                 catch {\n//                     set({isAuth: false, meta: API_META.ERROR});\n//                 }\n//             },\n//\n//             useTest: () => useQuery({\n//                 queryKey: [],\n//\n//                 queryFn: async () => {\n//                     console.log(\"call query\");\n//                     const response = await UserService.getMe();\n//\n//                     return response;\n//                 }\n//             })\n//         })\n// );\n//\n// class AuthStore {\n//     static useSession = useAuthStore.getState().session;\n//     static useMeta = () => useAuthStore(state => state.meta);\n//     static useAuth = () => useAuthStore(state => state.isAuth);\n//\n//     static login = useAuthStore.getState().login;\n//     static logout = useAuthStore.getState().logout;\n//     static check = useAuthStore.getState().check;\n// }","map":{"version":3,"names":[],"sources":["D:/Mega/Planner/frontend/src/entities/user/auth/store.ts"],"sourcesContent":["export {}\r\n// import {create} from \"zustand\";\r\n// import {API_META} from \"@shared/api\";\r\n// import {AuthService, ILoginParams, UserService, UserStore} from \"@entities/user\";\r\n// import Cookies from \"js-cookie\";\r\n// import {useQuery, UseQueryResult} from \"@tanstack/react-query\";\r\n// import {persist} from \"zustand/middleware\";\r\n//\r\n// interface AuthState {\r\n//     meta: API_META;\r\n//     //\r\n//     login: (params: ILoginParams) => Promise<void>;\r\n//     logout: () => Promise<void>;\r\n//     check: () => Promise<void>;\r\n// }\r\n//\r\n// const useAuthStore = create<AuthState>(\r\n//         (set, get) => ({\r\n//             meta: API_META.INITIAL,\r\n//             isAuth: false,\r\n//\r\n//             session: null,\r\n//\r\n//             login: async (params) => {\r\n//                 if(get().meta === API_META.LOADING) {\r\n//                     return;\r\n//                 }\r\n//\r\n//                 set({meta: API_META.LOADING});\r\n//\r\n//                 try {\r\n//                     await AuthService.login(params);\r\n//                     const session = Cookies.get(\"sessionid\");\r\n//                     set({session: session});\r\n//                     set({isAuth: true, meta: API_META.SUCCESS});\r\n//                 }\r\n//                 catch (error) {\r\n//                     set({meta: API_META.ERROR});\r\n//                     throw new Error(\"Неверный логин или пароль\");\r\n//                 }\r\n//             },\r\n//\r\n//             logout: async () => {\r\n//                 if(get().meta === API_META.LOADING) {\r\n//                     return;\r\n//                 }\r\n//\r\n//                 set({meta: API_META.LOADING});\r\n//\r\n//                 try {\r\n//                     await AuthService.logout();\r\n//                     set({session: null});\r\n//                     set({isAuth: false, meta: API_META.SUCCESS});\r\n//                 }\r\n//                 catch (error) {\r\n//                     set({meta: API_META.ERROR});\r\n//                 }\r\n//             },\r\n//\r\n//             check: async () => {\r\n//                 if(get().meta === API_META.LOADING) {\r\n//                     return;\r\n//                 }\r\n//\r\n//                 set({meta: API_META.LOADING});\r\n//\r\n//                 if(!Cookies.get(\"sessionid\")) {\r\n//                     set({isAuth: false, meta: API_META.ERROR});\r\n//                     return;\r\n//                 }\r\n//\r\n//                 try {\r\n//                     await UserStore.getMe();\r\n//                     set({isAuth: true, meta: API_META.SUCCESS});\r\n//                 }\r\n//                 catch {\r\n//                     set({isAuth: false, meta: API_META.ERROR});\r\n//                 }\r\n//             },\r\n//\r\n//             useTest: () => useQuery({\r\n//                 queryKey: [],\r\n//\r\n//                 queryFn: async () => {\r\n//                     console.log(\"call query\");\r\n//                     const response = await UserService.getMe();\r\n//\r\n//                     return response;\r\n//                 }\r\n//             })\r\n//         })\r\n// );\r\n//\r\n// class AuthStore {\r\n//     static useSession = useAuthStore.getState().session;\r\n//     static useMeta = () => useAuthStore(state => state.meta);\r\n//     static useAuth = () => useAuthStore(state => state.isAuth);\r\n//\r\n//     static login = useAuthStore.getState().login;\r\n//     static logout = useAuthStore.getState().logout;\r\n//     static check = useAuthStore.getState().check;\r\n// }"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}